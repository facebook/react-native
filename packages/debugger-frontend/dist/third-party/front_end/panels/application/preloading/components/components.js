import"../../../../ui/legacy/components/data_grid/data_grid.js";import*as e from"../../../../core/i18n/i18n.js";import*as t from"../../../../core/sdk/sdk.js";import*as r from"../../../../third_party/diff/diff.js";import*as a from"../../../../ui/components/legacy_wrapper/legacy_wrapper.js";import*as o from"../../../../ui/lit/lit.js";import{assertNotNullOrUndefined as i}from"../../../../core/platform/platform.js";import*as n from"../../../../models/bindings/bindings.js";import"../../../../ui/components/report_view/report_view.js";import"../../../../ui/components/request_link_icon/request_link_icon.js";import*as s from"../../../../core/common/common.js";import*as l from"../../../../models/logs/logs.js";import"../../../../ui/components/buttons/buttons.js";import*as d from"../../../../ui/components/render_coordinator/render_coordinator.js";import*as c from"../../../../ui/legacy/legacy.js";import*as u from"../../../../ui/visual_logging/visual_logging.js";import*as p from"../helper/helper.js";import*as h from"../../../../ui/components/chrome_link/chrome_link.js";import"../../../../ui/components/dialogs/dialogs.js";import"../../../../ui/components/icon_button/icon_button.js";import*as g from"../../../../models/formatter/formatter.js";import*as b from"../../../../third_party/codemirror.next/codemirror.next.js";import*as v from"../../../../ui/components/code_highlighter/code_highlighter.js";import*as f from"../../../../ui/components/text_editor/text_editor.js";import*as m from"../../../network/forward/forward.js";const y={PrefetchFailedIneligibleRedirect:"The prefetch was redirected, but the redirect URL is not eligible for prefetch.",PrefetchFailedInvalidRedirect:"The prefetch was redirected, but there was a problem with the redirect.",PrefetchFailedMIMENotSupported:"The prefetch failed because the response's Content-Type header was not supported.",PrefetchFailedNetError:"The prefetch failed because of a network error.",PrefetchFailedNon2XX:"The prefetch failed because of a non-2xx HTTP response status code.",PrefetchIneligibleRetryAfter:"A previous prefetch to the origin got a HTTP 503 response with an Retry-After header that has not elapsed yet.",PrefetchIsPrivacyDecoy:"The URL was not eligible to be prefetched because there was a registered service worker or cross-site cookies for that origin, but the prefetch was put on the network anyways and not used, to disguise that the user had some kind of previous relationship with the origin.",PrefetchIsStale:"Too much time elapsed between the prefetch and usage, so the prefetch was discarded.",PrefetchNotEligibleBrowserContextOffTheRecord:"The prefetch was not performed because the browser is in Incognito or Guest mode.",PrefetchNotEligibleDataSaverEnabled:"The prefetch was not performed because the operating system is in Data Saver mode.",PrefetchNotEligibleExistingProxy:"The URL is not eligible to be prefetched, because in the default network context it is configured to use a proxy server.",PrefetchNotEligibleHostIsNonUnique:"The URL was not eligible to be prefetched because its host was not unique (e.g., a non publicly routable IP address or a hostname which is not registry-controlled), but the prefetch was required to be proxied.",PrefetchNotEligibleNonDefaultStoragePartition:"The URL was not eligible to be prefetched because it uses a non-default storage partition.",PrefetchNotEligibleSameSiteCrossOriginPrefetchRequiredProxy:"The URL was not eligible to be prefetched because the default network context cannot be configured to use the prefetch proxy for a same-site cross-origin prefetch request.",PrefetchNotEligibleSchemeIsNotHttps:"The URL was not eligible to be prefetched because its scheme was not https:.",PrefetchNotEligibleUserHasCookies:"The URL was not eligible to be prefetched because it was cross-site, but the user had cookies for that origin.",PrefetchNotEligibleUserHasServiceWorker:"The URL was not eligible to be prefetched because there was a registered service worker for that origin, which is currently not supported.",PrefetchNotUsedCookiesChanged:"The prefetch was not used because it was a cross-site prefetch, and cookies were added for that URL while the prefetch was ongoing, so the prefetched response is now out-of-date.",PrefetchProxyNotAvailable:"A network error was encountered when trying to set up a connection to the prefetching proxy.",PrefetchNotUsedProbeFailed:"The prefetch was blocked by your Internet Service Provider or network administrator.",PrefetchEvictedForNewerPrefetch:"The prefetch was discarded because the initiating page has too many prefetches ongoing, and this was one of the oldest.",PrefetchEvictedAfterCandidateRemoved:"The prefetch was discarded because no speculation rule in the initating page triggers a prefetch for this URL anymore.",PrefetchNotEligibleBatterySaverEnabled:"The prefetch was not performed because the Battery Saver setting was enabled.",PrefetchNotEligiblePreloadingDisabled:"The prefetch was not performed because speculative loading was disabled.",prerenderFinalStatusLowEndDevice:"The prerender was not performed because this device does not have enough total system memory to support prerendering.",prerenderFinalStatusInvalidSchemeRedirect:"The prerendering navigation failed because it redirected to a URL whose scheme was not http: or https:.",prerenderFinalStatusInvalidSchemeNavigation:"The URL was not eligible to be prerendered because its scheme was not http: or https:.",prerenderFinalStatusNavigationRequestBlockedByCsp:"The prerendering navigation was blocked by a Content Security Policy.",prerenderFinalStatusMainFrameNavigation:"The prerendered page navigated itself to another URL, which is currently not supported.",prerenderFinalStatusMojoBinderPolicy:"The prerendered page used a forbidden JavaScript API that is currently not supported. (Internal Mojo interface: {PH1})",prerenderFinalStatusRendererProcessCrashed:"The prerendered page crashed.",prerenderFinalStatusRendererProcessKilled:"The prerendered page was killed.",prerenderFinalStatusDownload:"The prerendered page attempted to initiate a download, which is currently not supported.",prerenderFinalStatusNavigationBadHttpStatus:"The prerendering navigation failed because of a non-2xx HTTP response status code.",prerenderFinalStatusClientCertRequested:"The prerendering navigation required a HTTP client certificate.",prerenderFinalStatusNavigationRequestNetworkError:"The prerendering navigation encountered a network error.",prerenderFinalStatusSslCertificateError:"The prerendering navigation failed because of an invalid SSL certificate.",prerenderFinalStatusLoginAuthRequested:"The prerendering navigation required HTTP authentication, which is currently not supported.",prerenderFinalStatusUaChangeRequiresReload:"Changing User Agent occured in prerendering navigation.",prerenderFinalStatusBlockedByClient:"Some resource load was blocked.",prerenderFinalStatusAudioOutputDeviceRequested:"The prerendered page requested audio output, which is currently not supported.",prerenderFinalStatusMixedContent:"The prerendered page contained mixed content.",prerenderFinalStatusTriggerBackgrounded:"The initiating page was backgrounded, so the prerendered page was discarded.",prerenderFinalStatusMemoryLimitExceeded:"The prerender was not performed because the browser exceeded the prerendering memory limit.",prerenderFinalStatusDataSaverEnabled:"The prerender was not performed because the user requested that the browser use less data.",prerenderFinalStatusHasEffectiveUrl:"The initiating page cannot perform prerendering, because it has an effective URL that is different from its normal URL. (For example, the New Tab Page, or hosted apps.)",prerenderFinalStatusTimeoutBackgrounded:"The initiating page was backgrounded for a long time, so the prerendered page was discarded.",prerenderFinalStatusCrossSiteRedirectInInitialNavigation:"The prerendering navigation failed because the prerendered URL redirected to a cross-site URL.",prerenderFinalStatusCrossSiteNavigationInInitialNavigation:"The prerendering navigation failed because it targeted a cross-site URL.",prerenderFinalStatusSameSiteCrossOriginRedirectNotOptInInInitialNavigation:"The prerendering navigation failed because the prerendered URL redirected to a cross-origin same-site URL, but the destination response did not include the appropriate Supports-Loading-Mode header.",prerenderFinalStatusSameSiteCrossOriginNavigationNotOptInInInitialNavigation:"The prerendering navigation failed because it was to a cross-origin same-site URL, but the destination response did not include the appropriate Supports-Loading-Mode header.",prerenderFinalStatusActivationNavigationParameterMismatch:"The prerender was not used because during activation time, different navigation parameters (e.g., HTTP headers) were calculated than during the original prerendering navigation request.",prerenderFinalStatusPrimaryMainFrameRendererProcessCrashed:"The initiating page crashed.",prerenderFinalStatusPrimaryMainFrameRendererProcessKilled:"The initiating page was killed.",prerenderFinalStatusActivationFramePolicyNotCompatible:"The prerender was not used because the sandboxing flags or permissions policy of the initiating page was not compatible with those of the prerendering page.",prerenderFinalStatusPreloadingDisabled:"The prerender was not performed because the user disabled preloading in their browser settings.",prerenderFinalStatusBatterySaverEnabled:"The prerender was not performed because the user requested that the browser use less battery.",prerenderFinalStatusActivatedDuringMainFrameNavigation:"Prerendered page activated during initiating page's main frame navigation.",prerenderFinalStatusCrossSiteRedirectInMainFrameNavigation:"The prerendered page navigated to a URL which redirected to a cross-site URL.",prerenderFinalStatusCrossSiteNavigationInMainFrameNavigation:"The prerendered page navigated to a cross-site URL.",prerenderFinalStatusSameSiteCrossOriginRedirectNotOptInInMainFrameNavigation:"The prerendered page navigated to a URL which redirected to a cross-origin same-site URL, but the destination response did not include the appropriate Supports-Loading-Mode header.",prerenderFinalStatusSameSiteCrossOriginNavigationNotOptInInMainFrameNavigation:"The prerendered page navigated to a cross-origin same-site URL, but the destination response did not include the appropriate Supports-Loading-Mode header.",prerenderFinalStatusMemoryPressureOnTrigger:"The prerender was not performed because the browser was under critical memory pressure.",prerenderFinalStatusMemoryPressureAfterTriggered:"The prerendered page was unloaded because the browser came under critical memory pressure.",prerenderFinalStatusPrerenderingDisabledByDevTools:"The prerender was not performed because DevTools has been used to disable prerendering.",prerenderFinalStatusSpeculationRuleRemoved:'The prerendered page was unloaded because the initiating page removed the corresponding prerender rule from <script type="speculationrules">.',prerenderFinalStatusActivatedWithAuxiliaryBrowsingContexts:"The prerender was not used because during activation time, there were other windows with an active opener reference to the initiating page, which is currently not supported.",prerenderFinalStatusMaxNumOfRunningEagerPrerendersExceeded:'The prerender whose eagerness is "eager" was not performed because the initiating page already has too many prerenders ongoing. Remove other speculation rules with "eager" to enable further prerendering.',prerenderFinalStatusMaxNumOfRunningEmbedderPrerendersExceeded:"The browser-triggered prerender was not performed because the initiating page already has too many prerenders ongoing.",prerenderFinalStatusMaxNumOfRunningNonEagerPrerendersExceeded:'The old non-eager prerender (with a "moderate" or "conservative" eagerness and triggered by hovering or clicking links) was automatically canceled due to starting a new non-eager prerender. It can be retriggered by interacting with the link again.',prerenderFinalStatusPrerenderingUrlHasEffectiveUrl:"The prerendering navigation failed because it has an effective URL that is different from its normal URL. (For example, the New Tab Page, or hosted apps.)",prerenderFinalStatusRedirectedPrerenderingUrlHasEffectiveUrl:"The prerendering navigation failed because it redirected to an effective URL that is different from its normal URL. (For example, the New Tab Page, or hosted apps.)",prerenderFinalStatusActivationUrlHasEffectiveUrl:"The prerender was not used because during activation time, navigation has an effective URL that is different from its normal URL. (For example, the New Tab Page, or hosted apps.)",prerenderFinalStatusJavaScriptInterfaceAdded:"The prerendered page was unloaded because a new JavaScript interface has been injected by WebView.addJavascriptInterface().",prerenderFinalStatusJavaScriptInterfaceRemoved:"The prerendered page was unloaded because a JavaScript interface has been removed by WebView.removeJavascriptInterface().",prerenderFinalStatusAllPrerenderingCanceled:"All prerendered pages were unloaded by the browser for some reason (For example, WebViewCompat.addWebMessageListener() was called during prerendering.)",prerenderFinalStatusWindowClosed:"The prerendered page was unloaded because it called window.close().",statusNotTriggered:"Not triggered",statusPending:"Pending",statusRunning:"Running",statusReady:"Ready",statusSuccess:"Success",statusFailure:"Failure"},w=e.i18n.registerUIStrings("panels/application/preloading/components/PreloadingString.ts",y),S=e.i18n.getLazilyComputedLocalizedString.bind(void 0,w),P=e.i18n.getLocalizedString.bind(void 0,w),x={PrefetchFailedIneligibleRedirect:{name:S(y.PrefetchFailedIneligibleRedirect)},PrefetchFailedInvalidRedirect:{name:S(y.PrefetchFailedInvalidRedirect)},PrefetchFailedMIMENotSupported:{name:S(y.PrefetchFailedMIMENotSupported)},PrefetchFailedNetError:{name:S(y.PrefetchFailedNetError)},PrefetchFailedNon2XX:{name:S(y.PrefetchFailedNon2XX)},PrefetchIneligibleRetryAfter:{name:S(y.PrefetchIneligibleRetryAfter)},PrefetchIsPrivacyDecoy:{name:S(y.PrefetchIsPrivacyDecoy)},PrefetchIsStale:{name:S(y.PrefetchIsStale)},PrefetchNotEligibleBrowserContextOffTheRecord:{name:S(y.PrefetchNotEligibleBrowserContextOffTheRecord)},PrefetchNotEligibleDataSaverEnabled:{name:S(y.PrefetchNotEligibleDataSaverEnabled)},PrefetchNotEligibleExistingProxy:{name:S(y.PrefetchNotEligibleExistingProxy)},PrefetchNotEligibleHostIsNonUnique:{name:S(y.PrefetchNotEligibleHostIsNonUnique)},PrefetchNotEligibleNonDefaultStoragePartition:{name:S(y.PrefetchNotEligibleNonDefaultStoragePartition)},PrefetchNotEligibleSameSiteCrossOriginPrefetchRequiredProxy:{name:S(y.PrefetchNotEligibleSameSiteCrossOriginPrefetchRequiredProxy)},PrefetchNotEligibleSchemeIsNotHttps:{name:S(y.PrefetchNotEligibleSchemeIsNotHttps)},PrefetchNotEligibleUserHasCookies:{name:S(y.PrefetchNotEligibleUserHasCookies)},PrefetchNotEligibleUserHasServiceWorker:{name:S(y.PrefetchNotEligibleUserHasServiceWorker)},PrefetchNotUsedCookiesChanged:{name:S(y.PrefetchNotUsedCookiesChanged)},PrefetchProxyNotAvailable:{name:S(y.PrefetchProxyNotAvailable)},PrefetchNotUsedProbeFailed:{name:S(y.PrefetchNotUsedProbeFailed)},PrefetchEvictedForNewerPrefetch:{name:S(y.PrefetchEvictedForNewerPrefetch)},PrefetchEvictedAfterCandidateRemoved:{name:S(y.PrefetchEvictedAfterCandidateRemoved)},PrefetchNotEligibleBatterySaverEnabled:{name:S(y.PrefetchNotEligibleBatterySaverEnabled)},PrefetchNotEligiblePreloadingDisabled:{name:S(y.PrefetchNotEligiblePreloadingDisabled)},PrefetchNotEligibleUserHasServiceWorkerNoFetchHandler:{name:()=>e.i18n.lockedString("Unknown")},PrefetchNotEligibleRedirectFromServiceWorker:{name:()=>e.i18n.lockedString("Unknown")},PrefetchNotEligibleRedirectToServiceWorker:{name:()=>e.i18n.lockedString("Unknown")}};function k({prefetchStatus:t}){switch(t){case null:case"PrefetchNotStarted":case"PrefetchNotFinishedInTime":case"PrefetchResponseUsed":case"PrefetchAllowed":case"PrefetchHeldback":case"PrefetchSuccessfulButNotUsed":case"PrefetchEvictedAfterBrowsingDataRemoved":return null;case"PrefetchFailedIneligibleRedirect":return x.PrefetchFailedIneligibleRedirect.name();case"PrefetchFailedInvalidRedirect":return x.PrefetchFailedInvalidRedirect.name();case"PrefetchFailedMIMENotSupported":return x.PrefetchFailedMIMENotSupported.name();case"PrefetchFailedNetError":return x.PrefetchFailedNetError.name();case"PrefetchFailedNon2XX":return x.PrefetchFailedNon2XX.name();case"PrefetchIneligibleRetryAfter":return x.PrefetchIneligibleRetryAfter.name();case"PrefetchEvictedForNewerPrefetch":return x.PrefetchEvictedForNewerPrefetch.name();case"PrefetchEvictedAfterCandidateRemoved":return x.PrefetchEvictedAfterCandidateRemoved.name();case"PrefetchIsPrivacyDecoy":return x.PrefetchIsPrivacyDecoy.name();case"PrefetchIsStale":return x.PrefetchIsStale.name();case"PrefetchNotEligibleBrowserContextOffTheRecord":return x.PrefetchNotEligibleBrowserContextOffTheRecord.name();case"PrefetchNotEligibleDataSaverEnabled":return x.PrefetchNotEligibleDataSaverEnabled.name();case"PrefetchNotEligibleExistingProxy":return x.PrefetchNotEligibleExistingProxy.name();case"PrefetchNotEligibleHostIsNonUnique":return x.PrefetchNotEligibleHostIsNonUnique.name();case"PrefetchNotEligibleNonDefaultStoragePartition":return x.PrefetchNotEligibleNonDefaultStoragePartition.name();case"PrefetchNotEligibleSameSiteCrossOriginPrefetchRequiredProxy":return x.PrefetchNotEligibleSameSiteCrossOriginPrefetchRequiredProxy.name();case"PrefetchNotEligibleSchemeIsNotHttps":return x.PrefetchNotEligibleSchemeIsNotHttps.name();case"PrefetchNotEligibleUserHasCookies":return x.PrefetchNotEligibleUserHasCookies.name();case"PrefetchNotEligibleUserHasServiceWorker":return x.PrefetchNotEligibleUserHasServiceWorker.name();case"PrefetchNotUsedCookiesChanged":return x.PrefetchNotUsedCookiesChanged.name();case"PrefetchProxyNotAvailable":return x.PrefetchProxyNotAvailable.name();case"PrefetchNotUsedProbeFailed":return x.PrefetchNotUsedProbeFailed.name();case"PrefetchNotEligibleBatterySaverEnabled":return x.PrefetchNotEligibleBatterySaverEnabled.name();case"PrefetchNotEligiblePreloadingDisabled":return x.PrefetchNotEligiblePreloadingDisabled.name();case"PrefetchNotEligibleUserHasServiceWorkerNoFetchHandler":return x.PrefetchNotEligibleUserHasServiceWorkerNoFetchHandler.name();case"PrefetchNotEligibleRedirectFromServiceWorker":return x.PrefetchNotEligibleRedirectFromServiceWorker.name();case"PrefetchNotEligibleRedirectToServiceWorker":return x.PrefetchNotEligibleRedirectToServiceWorker.name();default:return e.i18n.lockedString(`Unknown failure reason: ${t}`)}}function R(t){switch(t.prerenderStatus){case null:case"Activated":return null;case"Destroyed":case"DidFailLoad":case"Stop":return e.i18n.lockedString("Unknown");case"LowEndDevice":return P(y.prerenderFinalStatusLowEndDevice);case"InvalidSchemeRedirect":return P(y.prerenderFinalStatusInvalidSchemeRedirect);case"InvalidSchemeNavigation":return P(y.prerenderFinalStatusInvalidSchemeNavigation);case"NavigationRequestBlockedByCsp":return P(y.prerenderFinalStatusNavigationRequestBlockedByCsp);case"MainFrameNavigation":return P(y.prerenderFinalStatusMainFrameNavigation);case"MojoBinderPolicy":return i(t.disallowedMojoInterface),P(y.prerenderFinalStatusMojoBinderPolicy,{PH1:t.disallowedMojoInterface});case"RendererProcessCrashed":return P(y.prerenderFinalStatusRendererProcessCrashed);case"RendererProcessKilled":return P(y.prerenderFinalStatusRendererProcessKilled);case"Download":return P(y.prerenderFinalStatusDownload);case"TriggerDestroyed":case"NavigationNotCommitted":case"ActivatedBeforeStarted":case"InactivePageRestriction":case"StartFailed":case"ActivatedInBackground":case"ActivationNavigationDestroyedBeforeSuccess":return e.i18n.lockedString("Internal error");case"NavigationBadHttpStatus":return P(y.prerenderFinalStatusNavigationBadHttpStatus);case"ClientCertRequested":return P(y.prerenderFinalStatusClientCertRequested);case"NavigationRequestNetworkError":return P(y.prerenderFinalStatusNavigationRequestNetworkError);case"CancelAllHostsForTesting":case"EmbedderHostDisallowed":case"TabClosedByUserGesture":case"TabClosedWithoutUserGesture":case"PreloadingUnsupportedByWebContents":throw new Error("unreachable");case"SslCertificateError":return P(y.prerenderFinalStatusSslCertificateError);case"LoginAuthRequested":return P(y.prerenderFinalStatusLoginAuthRequested);case"UaChangeRequiresReload":return P(y.prerenderFinalStatusUaChangeRequiresReload);case"BlockedByClient":return P(y.prerenderFinalStatusBlockedByClient);case"AudioOutputDeviceRequested":return P(y.prerenderFinalStatusAudioOutputDeviceRequested);case"MixedContent":return P(y.prerenderFinalStatusMixedContent);case"TriggerBackgrounded":return P(y.prerenderFinalStatusTriggerBackgrounded);case"MemoryLimitExceeded":return P(y.prerenderFinalStatusMemoryLimitExceeded);case"DataSaverEnabled":return P(y.prerenderFinalStatusDataSaverEnabled);case"TriggerUrlHasEffectiveUrl":return P(y.prerenderFinalStatusHasEffectiveUrl);case"TimeoutBackgrounded":return P(y.prerenderFinalStatusTimeoutBackgrounded);case"CrossSiteRedirectInInitialNavigation":return P(y.prerenderFinalStatusCrossSiteRedirectInInitialNavigation);case"CrossSiteNavigationInInitialNavigation":return P(y.prerenderFinalStatusCrossSiteNavigationInInitialNavigation);case"SameSiteCrossOriginRedirectNotOptInInInitialNavigation":return P(y.prerenderFinalStatusSameSiteCrossOriginRedirectNotOptInInInitialNavigation);case"SameSiteCrossOriginNavigationNotOptInInInitialNavigation":return P(y.prerenderFinalStatusSameSiteCrossOriginNavigationNotOptInInInitialNavigation);case"ActivationNavigationParameterMismatch":return P(y.prerenderFinalStatusActivationNavigationParameterMismatch);case"PrimaryMainFrameRendererProcessCrashed":return P(y.prerenderFinalStatusPrimaryMainFrameRendererProcessCrashed);case"PrimaryMainFrameRendererProcessKilled":return P(y.prerenderFinalStatusPrimaryMainFrameRendererProcessKilled);case"ActivationFramePolicyNotCompatible":return P(y.prerenderFinalStatusActivationFramePolicyNotCompatible);case"PreloadingDisabled":return P(y.prerenderFinalStatusPreloadingDisabled);case"BatterySaverEnabled":return P(y.prerenderFinalStatusBatterySaverEnabled);case"ActivatedDuringMainFrameNavigation":return P(y.prerenderFinalStatusActivatedDuringMainFrameNavigation);case"CrossSiteRedirectInMainFrameNavigation":return P(y.prerenderFinalStatusCrossSiteRedirectInMainFrameNavigation);case"CrossSiteNavigationInMainFrameNavigation":return P(y.prerenderFinalStatusCrossSiteNavigationInMainFrameNavigation);case"SameSiteCrossOriginRedirectNotOptInInMainFrameNavigation":return P(y.prerenderFinalStatusSameSiteCrossOriginRedirectNotOptInInMainFrameNavigation);case"SameSiteCrossOriginNavigationNotOptInInMainFrameNavigation":return P(y.prerenderFinalStatusSameSiteCrossOriginNavigationNotOptInInMainFrameNavigation);case"MemoryPressureOnTrigger":return P(y.prerenderFinalStatusMemoryPressureOnTrigger);case"MemoryPressureAfterTriggered":return P(y.prerenderFinalStatusMemoryPressureAfterTriggered);case"PrerenderingDisabledByDevTools":return P(y.prerenderFinalStatusPrerenderingDisabledByDevTools);case"SpeculationRuleRemoved":return P(y.prerenderFinalStatusSpeculationRuleRemoved);case"ActivatedWithAuxiliaryBrowsingContexts":return P(y.prerenderFinalStatusActivatedWithAuxiliaryBrowsingContexts);case"MaxNumOfRunningEagerPrerendersExceeded":return P(y.prerenderFinalStatusMaxNumOfRunningEagerPrerendersExceeded);case"MaxNumOfRunningEmbedderPrerendersExceeded":return P(y.prerenderFinalStatusMaxNumOfRunningEmbedderPrerendersExceeded);case"MaxNumOfRunningNonEagerPrerendersExceeded":return P(y.prerenderFinalStatusMaxNumOfRunningNonEagerPrerendersExceeded);case"PrerenderingUrlHasEffectiveUrl":return P(y.prerenderFinalStatusPrerenderingUrlHasEffectiveUrl);case"RedirectedPrerenderingUrlHasEffectiveUrl":return P(y.prerenderFinalStatusRedirectedPrerenderingUrlHasEffectiveUrl);case"ActivationUrlHasEffectiveUrl":return P(y.prerenderFinalStatusActivationUrlHasEffectiveUrl);case"JavaScriptInterfaceAdded":return P(y.prerenderFinalStatusJavaScriptInterfaceAdded);case"JavaScriptInterfaceRemoved":return P(y.prerenderFinalStatusJavaScriptInterfaceRemoved);case"AllPrerenderingCanceled":return P(y.prerenderFinalStatusAllPrerenderingCanceled);case"WindowClosed":return P(y.prerenderFinalStatusWindowClosed);case"SlowNetwork":case"OtherPrerenderedPageActivated":case"V8OptimizerDisabled":case"PrerenderFailedDuringPrefetch":return"";default:return e.i18n.lockedString(`Unknown failure reason: ${t.prerenderStatus}`)}}function N(e,t){const r=void 0===e.url?t:e.url;return n.ResourceUtils.displayNameForURL(r)}function F(t){switch(t){case"Prefetch":return e.i18n.lockedString("Prefetch");case"Prerender":return e.i18n.lockedString("Prerender")}}function T(t){const r=function(t){switch(t){case"NotTriggered":return P(y.statusNotTriggered);case"Pending":return P(y.statusPending);case"Running":return P(y.statusRunning);case"Ready":return P(y.statusReady);case"Success":return P(y.statusSuccess);case"Failure":return P(y.statusFailure);case"NotSupported":return e.i18n.lockedString("Internal error")}}(t.status);if("Failure"!==t.status)return r;switch(t.action){case"Prefetch":return r+" - "+(k(t)??e.i18n.lockedString("Internal error"));case"Prerender":{const e=R(t);return i(e),r+" - "+e}}}const{charDiff:E}=r.Diff.DiffWrapper,{render:$,html:I,Directives:{styleMap:U}}=o,C={url:"URL",action:"Action",status:"Status",statusNotTriggered:"Not triggered",statusPending:"Pending",statusRunning:"Running",statusReady:"Ready",statusSuccess:"Success",statusFailure:"Failure"},D=e.i18n.registerUIStrings("panels/application/preloading/components/MismatchedPreloadingGrid.ts",C),L=e.i18n.getLocalizedString.bind(void 0,D);let B=class{static status(t){switch(t){case"NotTriggered":return L(C.statusNotTriggered);case"Pending":return L(C.statusPending);case"Running":return L(C.statusRunning);case"Ready":return L(C.statusReady);case"Success":return L(C.statusSuccess);case"Failure":return L(C.statusFailure);case"NotSupported":return e.i18n.lockedString("Internal error")}}};class M extends a.LegacyWrapper.WrappableComponent{#e=this.attachShadow({mode:"open"});#t=null;connectedCallback(){this.#e.adoptedStyleSheets=[],this.#r()}set data(e){this.#t=e,this.#r()}#r(){if(!this.#t)return;const{pageURL:e}=this.#t;$(I`<devtools-data-grid striped inline>
          <table>
            <tr>
              <th id="url" weight="40" sortable>
                ${L(C.url)}
              </th>
              <th id="action" weight="15" sortable>
                ${L(C.action)}
              </th>
              <th id="status" weight="15" sortable>
                ${L(C.status)}
              </th>
            </tr>
            ${this.#t.rows.map((t=>({row:t,diffScore:r.Diff.DiffWrapper.characterScore(t.url,e)}))).sort(((e,t)=>t.diffScore-e.diffScore)).map((({row:t})=>I`
                <tr>
                  <td>
                    <div>${E(t.url,e).map((e=>{const t=e[1];switch(e[0]){case r.Diff.Operation.Equal:return I`<span>${t}</span>`;case r.Diff.Operation.Insert:return I`<span style=${U({color:"var(--sys-color-green)","text-decoration":"line-through"})}
                               >${t}</span>`;case r.Diff.Operation.Delete:return I`<span style=${U({color:"var(--sys-color-error)"})}>${t}</span>`;case r.Diff.Operation.Edit:return I`<span style=${U({color:"var(--sys-color-green","text-decoration":"line-through"})}
                            >${t}</span>`;default:throw new Error("unreachable")}}))}
                    </div>
                  </td>
                  <td>${F(t.action)}</td>
                  <td>${B.status(t.status)}</td>
                </tr>
              `))}
          </table>
        </devtools-data-grid>`,this.#e,{host:this})}}customElements.define("devtools-resources-mismatched-preloading-grid",M);var H=Object.freeze({__proto__:null,MismatchedPreloadingGrid:M,i18nString:L}),A=`*{box-sizing:border-box;min-width:0;min-height:0}:root{height:100%;overflow:hidden;interpolate-size:allow-keywords}body{height:100%;width:100%;position:relative;overflow:hidden;margin:0;cursor:default;font-family:var(--default-font-family);font-size:12px;tab-size:4;user-select:none;color:var(--sys-color-on-surface);background:var(--sys-color-cdt-base-container)}:focus{outline-width:0}.monospace{font-family:var(--monospace-font-family);font-size:var(\n    --monospace-font-size\n  )!important}.source-code{font-family:var(--source-code-font-family);font-size:var(\n    --source-code-font-size\n  )!important;white-space:pre-wrap;&:not(input)::selection{color:var(--sys-color-on-surface)}}.source-code.breakpoint{white-space:nowrap}.source-code .devtools-link.text-button{max-width:100%;overflow:hidden;text-overflow:ellipsis}img{-webkit-user-drag:none}iframe,\na img{border:none}.fill{position:absolute;inset:0}iframe.fill{width:100%;height:100%}.widget{position:relative;flex:auto;contain:style}.hbox{display:flex;flex-direction:row!important;position:relative}.vbox{display:flex;flex-direction:column!important;position:relative}.view-container > devtools-toolbar{border-bottom:1px solid var(--sys-color-divider)}.flex-auto{flex:auto}.flex-none{flex:none}.flex-centered{display:flex;align-items:center;justify-content:center}.overflow-auto{overflow:auto;background-color:var(--sys-color-cdt-base-container)}iframe.widget{position:absolute;width:100%;height:100%;inset:0}.hidden{display:none!important}.highlighted-search-result{border-radius:1px;background-color:var(--sys-color-yellow-container);outline:1px solid var(--sys-color-yellow-container)}.link{cursor:pointer;text-decoration:underline;color:var(--sys-color-primary);outline-offset:2px}button,\ninput,\nselect{font-family:inherit;font-size:inherit}select option,\nselect optgroup,\ninput{background-color:var(--sys-color-cdt-base-container)}input{color:inherit;&[type="checkbox"]{position:relative;outline:none;display:flex;align-items:center;justify-content:center;&:hover::after,\n    &:active::before{content:"";height:24px;width:24px;border-radius:var(--sys-shape-corner-full);position:absolute}&:not(.-theme-preserve){accent-color:var(--sys-color-primary-bright);color:var(--sys-color-on-primary)}&:not(:disabled):hover::after{background-color:var(--sys-color-state-hover-on-subtle)}&:not(:disabled):active::before{background-color:var(--sys-color-state-ripple-neutral-on-subtle)}&:not(:disabled):focus-visible::before{content:"";height:15px;width:15px;border-radius:5px;position:absolute;border:2px solid var(--sys-color-state-focus-ring)}&.small:hover::after,\n    &.small:active::before{height:12px;width:12px;border-radius:2px}}}input::placeholder{--override-input-placeholder-color:rgb(0 0 0/54%);color:var(--override-input-placeholder-color)}.theme-with-dark-background input::placeholder,\n:host-context(.theme-with-dark-background) input::placeholder{--override-input-placeholder-color:rgb(230 230 230/54%)}.harmony-input:not([type]),\n.harmony-input[type="number"],\n.harmony-input[type="text"]{padding:3px 6px;height:24px;border:1px solid var(--sys-color-neutral-outline);border-radius:4px;&.error-input,\n  &:invalid{border-color:var(--sys-color-error)}&:not(.error-input, :invalid):focus{border-color:var(--sys-color-state-focus-ring)}&:not(.error-input, :invalid):hover:not(:focus){background:var(--sys-color-state-hover-on-subtle)}}input[type="radio"]{height:17px;width:17px;min-width:17px;border-radius:8px;vertical-align:sub;margin:0 5px 5px 0;accent-color:var(--sys-color-primary-bright);color:var(--sys-color-on-primary);&:focus{box-shadow:var(--legacy-focus-ring-active-shadow)}}@media (forced-colors: active){input[type="radio"]{--gradient-start:ButtonFace;--gradient-end:ButtonFace;&:checked{--gradient-start:Highlight;--gradient-end:Highlight}}}input[type="range"]{appearance:none;margin:0;padding:0;height:10px;width:88px;outline:none;background:none}input[type="range"]::-webkit-slider-thumb,\n.-theme-preserve{appearance:none;margin:0;padding:0;border:0;width:12px;height:12px;margin-top:-5px;border-radius:50%;background-color:var(--sys-color-primary)}input[type="range"]::-webkit-slider-runnable-track{appearance:none;margin:0;padding:0;width:100%;height:2px;background-color:var(--sys-color-surface-variant)}input[type="range"]:focus::-webkit-slider-thumb{box-shadow:0 0 0 2px var(--sys-color-inverse-primary)}input[type="range"]:disabled::-webkit-slider-thumb{background-color:var(--sys-color-state-disabled)}@media (forced-colors: active){input[type="range"]{forced-color-adjust:none}}.highlighted-search-result.current-search-result{--override-current-search-result-background-color:rgb(255 127 0/80%);border-radius:1px;padding:1px;margin:-1px;background-color:var(--override-current-search-result-background-color)}.dimmed{opacity:60%}.editing{box-shadow:var(--drop-shadow);background-color:var(--sys-color-cdt-base-container);text-overflow:clip!important;padding-left:2px;margin-left:-2px;padding-right:2px;margin-right:-2px;margin-bottom:-1px;padding-bottom:1px;opacity:100%!important}.editing,\n.editing *{color:var(\n    --sys-color-on-surface\n  )!important;text-decoration:none!important}select{appearance:none;user-select:none;height:var(--sys-size-11);border:var(--sys-size-1) solid var(--sys-color-neutral-outline);border-radius:var(--sys-shape-corner-extra-small);color:var(--sys-color-on-surface);font:inherit;margin:0;outline:none;padding:0 var(--sys-size-9) 0 var(--sys-size-5);background-image:var(--combobox-dropdown-arrow);background-color:transparent;background-position:right center;background-repeat:no-repeat;&:disabled{opacity:100%;border-color:transparent;color:var(--sys-color-state-disabled);background-color:var(--sys-color-state-disabled-container);pointer-events:none}&:enabled{&:hover{background-color:var(--sys-color-state-hover-on-subtle)}&:active{background-color:var(--sys-color-state-ripple-neutral-on-subtle)}&:hover:active{background:var(--combobox-dropdown-arrow),linear-gradient(var(--sys-color-state-hover-on-subtle),var(--sys-color-state-hover-on-subtle)),linear-gradient(var(--sys-color-state-ripple-neutral-on-subtle),var(--sys-color-state-ripple-neutral-on-subtle));background-position:right center;background-repeat:no-repeat}&:focus{outline:var(--sys-size-2) solid var(--sys-color-state-focus-ring);outline-offset:-1px}}}@media (forced-colors: active) and (prefers-color-scheme: light){:root,\n  .theme-with-dark-background,\n  :host-context(.theme-with-dark-background){--combobox-dropdown-arrow:var(--image-file-arrow-drop-down-light)}}@media (forced-colors: active) and (prefers-color-scheme: dark){:root,\n  .theme-with-dark-background,\n  :host-context(.theme-with-dark-background){--combobox-dropdown-arrow:var(--image-file-arrow-drop-down-dark)}}.chrome-select-label{margin:0 var(--sys-size-10);flex:none;p p{margin-top:0;color:var(--sys-color-token-subtle)}.reload-warning{margin-left:var(--sys-size-5)}}.settings-select{margin:0}select optgroup,\nselect option{background-color:var(--sys-color-cdt-base-container);color:var(--sys-color-on-surface)}.gray-info-message{text-align:center;font-style:italic;padding:6px;color:var(--sys-color-token-subtle);white-space:nowrap}.empty-state{margin:var(--sys-size-5);display:flex;flex-grow:1;justify-content:center;align-items:center;flex-direction:column;text-align:center;min-height:fit-content;min-width:fit-content;> *{max-width:var(--sys-size-29)}.empty-state-header{font:var(--sys-typescale-headline5);margin-bottom:var(--sys-size-3)}.empty-state-description{font:var(--sys-typescale-body4-regular);color:var(--sys-color-on-surface-subtle);> x-link{white-space:nowrap;margin-left:var(--sys-size-3)}}> devtools-button{margin-top:var(--sys-size-7)}}dt-icon-label{flex:none}.full-widget-dimmed-banner a{color:inherit}.full-widget-dimmed-banner{color:var(--sys-color-token-subtle);background-color:var(--sys-color-cdt-base-container);display:flex;justify-content:center;align-items:center;text-align:center;padding:20px;position:absolute;inset:0;font-size:13px;overflow:auto;z-index:500}.dot::before{content:var(--image-file-empty);width:6px;height:6px;border-radius:50%;outline:1px solid var(--icon-gap-default);left:9px;position:absolute;top:9px;z-index:1}.green::before{background-color:var(--sys-color-green-bright)}.purple::before{background-color:var(--sys-color-purple-bright)}.expandable-inline-button{background-color:var(--sys-color-cdt-base-container);color:var(--sys-color-on-surface);cursor:pointer;border-radius:3px}.undisplayable-text,\n.expandable-inline-button{border:none;padding:1px 3px;margin:0 2px;font-size:11px;font-family:sans-serif;white-space:nowrap;display:inline-block}.undisplayable-text::after,\n.expandable-inline-button::after{content:attr(data-text)}.undisplayable-text{color:var(--sys-color-state-disabled);font-style:italic}.expandable-inline-button:hover,\n.expandable-inline-button:focus-visible{background-color:var(--sys-color-state-hover-on-subtle)}.expandable-inline-button:focus-visible{background-color:var(--sys-color-state-focus-highlight)}::selection{background-color:var(--sys-color-state-text-highlight);color:var(--sys-color-state-on-text-highlight)}button.link{border:none;background:none;padding:3px}button.link:focus-visible{outline:2px solid var(--sys-color-state-focus-ring);outline-offset:2px;border-radius:var(--sys-shape-corner-full)}.data-grid-data-grid-node button.link:focus-visible{border-radius:var(--sys-shape-corner-extra-small);padding:0;margin-top:3px}@media (forced-colors: active){.dimmed,\n  select:disabled{opacity:100%}.harmony-input:not([type]),\n  .harmony-input[type="number"],\n  .harmony-input[type="text"]{border:1px solid ButtonText}.harmony-input:not([type]):focus,\n  .harmony-input[type="number"]:focus,\n  .harmony-input[type="text"]:focus{border:1px solid Highlight}}input.custom-search-input::-webkit-search-cancel-button{appearance:none;width:16px;height:15px;margin-right:0;opacity:70%;mask-image:var(--image-file-cross-circle-filled);mask-position:center;mask-repeat:no-repeat;mask-size:99%;background-color:var(--icon-default)}input.custom-search-input::-webkit-search-cancel-button:hover{opacity:99%}.spinner::before{display:block;width:var(--dimension,24px);height:var(--dimension,24px);border:var(--override-spinner-size,3px) solid var(--override-spinner-color,var(--sys-color-token-subtle));border-radius:12px;clip:rect(0,var(--clip-size,15px),var(--clip-size,15px),0);content:"";position:absolute;animation:spinner-animation 1s linear infinite;box-sizing:border-box}@keyframes spinner-animation{from{transform:rotate(0)}to{transform:rotate(360deg)}}.adorner-container{display:inline-flex;vertical-align:middle}.adorner-container.hidden{display:none}.adorner-container devtools-adorner{margin-left:3px}:host-context(.theme-with-dark-background) devtools-adorner{--override-adorner-border-color:var(--sys-color-tonal-outline);--override-adorner-active-background-color:var(\n    --sys-color-state-riple-neutral-on-subtle\n  )}.panel{display:flex;overflow:hidden;position:absolute;inset:0;z-index:0;background-color:var(--sys-color-cdt-base-container)}.panel-sidebar{overflow-x:hidden;background-color:var(--sys-color-cdt-base-container)}iframe.extension{flex:auto;width:100%;height:100%}iframe.panel.extension{display:block;height:100%}@media (forced-colors: active){:root{--legacy-accent-color:Highlight;--legacy-focus-ring-inactive-shadow-color:ButtonText}}devtools-toolbar{& > *{position:relative;display:flex;background-color:transparent;flex:none;align-items:center;justify-content:center;height:var(--toolbar-height);border:none;white-space:pre;overflow:hidden;max-width:100%;color:var(--icon-default);cursor:default;& .devtools-link{color:var(--icon-default)}}.status-buttons{padding:0 var(--sys-size-2);gap:var(--sys-size-2)}& > :not(select){padding:0}& > devtools-issue-counter{margin-top:-4px;padding:0 1px}devtools-adorner.fix-perf-icon{--override-adorner-text-color:transparent;--override-adorner-border-color:transparent;--override-adorner-background-color:transparent}devtools-issue-counter.main-toolbar{margin-left:1px;margin-right:1px}.toolbar-dropdown-arrow{pointer-events:none;flex:none;top:2px}.toolbar-button.dark-text .toolbar-dropdown-arrow{color:var(--sys-color-on-surface)}.toolbar-button{white-space:nowrap;overflow:hidden;min-width:28px;background:transparent;border-radius:0;&[aria-haspopup="true"][aria-expanded="true"]{pointer-events:none}}.toolbar-item-search{min-width:5.2em;max-width:300px;flex:1 1 auto;justify-content:start;overflow:revert}.toolbar-text{margin:0 5px;flex:none;color:var(--ui-text)}.toolbar-text:empty{margin:0}.toolbar-has-dropdown{justify-content:space-between;height:var(--sys-size-9);padding:0 var(--sys-size-2) 0 var(--sys-size-4);margin:0 var(--sys-size-2);gap:var(--sys-size-2);border-radius:var(--sys-shape-corner-extra-small);&:hover::after,\n    &:active::before{content:"";height:100%;width:100%;border-radius:inherit;position:absolute;top:0;left:0}&:hover::after{background-color:var(--sys-color-state-hover-on-subtle)}&:active::before{background-color:var(--sys-color-state-ripple-neutral-on-subtle)}&:focus-visible{outline:var(--sys-size-2) solid var(--sys-color-state-focus-ring)}&[disabled]{pointer-events:none;background-color:var(--sys-color-state-disabled-container);color:var(--sys-color-state-disabled)}}.toolbar-has-dropdown-shrinkable{flex-shrink:1}.toolbar-has-dropdown .toolbar-text{margin:0;text-overflow:ellipsis;flex:auto;overflow:hidden;text-align:right}.toolbar-button:not(.toolbar-has-dropdown):focus-visible::before{position:absolute;inset:2px;background-color:var(--sys-color-state-focus-highlight);border-radius:2px;content:"";z-index:-1}.toolbar-glyph{flex:none}.toolbar-button:disabled{opacity:50%}.toolbar-button.copied-to-clipboard::after{content:attr(data-content);position:fixed;margin-top:calc(2 * var(--toolbar-height));padding:3px 5px;color:var(--sys-color-token-subtle);background:var(--sys-color-cdt-base-container);animation:2s fade-out;font-weight:normal;border:1px solid var(--sys-color-divider);border-radius:3px}.toolbar-button.toolbar-state-on .toolbar-glyph{color:var(--icon-toggled)}.toolbar-state-on.toolbar-toggle-with-dot .toolbar-text::after{content:"";position:absolute;bottom:2px;background-color:var(--sys-color-primary-bright);width:4.5px;height:4.5px;border:2px solid var(--override-toolbar-background-color,--sys-color-cdt-base-container);border-radius:50%;right:0}.toolbar-button.toolbar-state-on.toolbar-toggle-with-red-color .toolbar-glyph,\n  .toolbar-button.toolbar-state-off.toolbar-default-with-red-color\n    .toolbar-glyph{color:var(\n      --icon-error\n    )!important}.toolbar-button:not(\n      .toolbar-has-glyph,\n      .toolbar-has-dropdown,\n      .largeicon-menu,\n      .toolbar-button-secondary\n    ){font-weight:bold}.toolbar-button.dark-text .toolbar-text{color:var(\n      --sys-color-on-surface\n    )!important}.toolbar-button.toolbar-state-on .toolbar-text{color:var(--sys-color-primary)}.toolbar-button.toolbar-state-on:enabled:active .toolbar-text{color:var(--sys-color-primary-bright)}.toolbar-button:enabled:hover:not(:active) .toolbar-glyph{color:var(--sys-color-on-surface)}.toolbar-button:enabled:hover:not(:active) .toolbar-text{color:var(--sys-color-on-surface)}.toolbar-button.toolbar-state-on:enabled:hover:not(:active) .toolbar-glyph{color:var(--sys-color-primary)}.toolbar-button.toolbar-state-on:enabled:hover:not(:active) .toolbar-text{color:var(--sys-color-primary)}& > dt-checkbox{padding:0 5px 0 0}& > select{height:var(--sys-size-9);min-width:var(--sys-size-14)}.toolbar-input{box-shadow:inset 0 0 0 2px transparent;box-sizing:border-box;width:120px;height:var(--sys-size-9);padding:0 var(--sys-size-2) 0 var(--sys-size-5);margin:1px 3px;border-radius:100px;min-width:35px;position:relative;&.focused{box-shadow:inset 0 0 0 2px var(--sys-color-state-focus-ring)}&:not(:has(devtools-button:hover), .disabled):hover{background-color:var(--sys-color-state-hover-on-subtle)}&::before{content:"";box-sizing:inherit;height:100%;width:100%;position:absolute;left:0;background:var(--sys-color-cdt-base);z-index:-1}& > devtools-icon{color:var(--sys-color-on-surface-subtle);width:var(--sys-size-8);height:var(--sys-size-8);margin-right:var(--sys-size-3)}&.disabled > devtools-icon{color:var(--sys-color-state-disabled)}}.toolbar-filter .toolbar-input-clear-button{margin-right:var(--sys-size-4)}.toolbar-input-empty .toolbar-input-clear-button{display:none}.toolbar-prompt-proxy{flex:1}.toolbar-input-prompt{flex:1;overflow:hidden;white-space:nowrap;cursor:text;color:var(--sys-color-on-surface)}.toolbar-divider{background-color:var(--sys-color-divider);width:1px;margin:5px 4px;height:16px}.toolbar-spacer{flex:auto}.toolbar-button.emulate-active{background-color:var(--sys-color-surface-variant)}&:not([floating]) > :last-child:not(:first-child, select){flex-shrink:1;justify-content:left}&:not([floating]) > .toolbar-button:last-child:not(:first-child, select){justify-content:left;margin-right:2px}& > .highlight::before{content:"";position:absolute;inset:2px;border-radius:2px;background:var(--sys-color-neutral-container);z-index:-1}& > .highlight:focus-visible{background:var(--sys-color-tonal-container);& > .title{color:var(--sys-color-on-tonal-container)}}devtools-icon.leading-issue-icon{margin:0 7px}@media (forced-colors: active){.toolbar-button:disabled{opacity:100%;color:Graytext}devtools-toolbar > *,\n    .toolbar-text{color:ButtonText}.toolbar-button:disabled .toolbar-text{color:Graytext}devtools-toolbar > select:disabled{opacity:100%;color:Graytext}.toolbar-button.toolbar-state-on .toolbar-glyph{forced-color-adjust:none;color:Highlight}.toolbar-button.toolbar-state-on .toolbar-text{forced-color-adjust:none;color:Highlight}.toolbar-button:enabled:hover:not(:active) .toolbar-text,\n    .toolbar-button:enabled:focus:not(:active) .toolbar-text{color:HighlightText}.toolbar-button:disabled devtools-icon{color:GrayText}.toolbar-button:disabled .toolbar-glyph{color:GrayText}.toolbar-button:enabled.hover:not(:active) .toolbar-glyph{forced-color-adjust:none;color:Highlight}.toolbar-button:enabled:hover .toolbar-glyph,\n    .toolbar-button:enabled:focus .toolbar-glyph,\n    .toolbar-button:enabled:hover:not(:active) .toolbar-glyph,\n    .toolbar-button:enabled:hover devtools-icon,\n    .toolbar-button:enabled:focus devtools-icon{color:HighlightText}.toolbar-input{forced-color-adjust:none;background:canvas;box-shadow:var(--legacy-focus-ring-inactive-shadow)}.toolbar-input.focused,\n    .toolbar-input:not(.toolbar-input-empty){forced-color-adjust:none;background:canvas;box-shadow:var(--legacy-focus-ring-active-shadow)}.toolbar-input:hover{box-shadow:var(--legacy-focus-ring-active-shadow)}devtools-toolbar .devtools-link{color:linktext}.toolbar-has-dropdown{forced-color-adjust:none;background:ButtonFace;color:ButtonText}}}@keyframes fade-out{from{opacity:100%}to{opacity:0%}}.webkit-css-property{color:var(--webkit-css-property-color,var(--sys-color-token-property-special))}.webkit-html-comment{color:var(--sys-color-token-comment)}.webkit-html-tag{color:var(--sys-color-token-tag)}.webkit-html-tag-name,\n.webkit-html-close-tag-name{color:var(--sys-color-token-tag)}.webkit-html-pseudo-element{color:var(--sys-color-token-pseudo-element)}.webkit-html-js-node,\n.webkit-html-css-node{color:var(--text-primary);white-space:pre-wrap}.webkit-html-text-node{color:var(--text-primary);unicode-bidi:-webkit-isolate}.webkit-html-entity-value{background-color:rgb(0 0 0/15%);unicode-bidi:-webkit-isolate}.webkit-html-doctype{color:var(--text-secondary)}.webkit-html-attribute-name{color:var(--sys-color-token-attribute);unicode-bidi:-webkit-isolate}.webkit-html-attribute-value{color:var(--sys-color-token-attribute-value);unicode-bidi:-webkit-isolate;word-break:break-all}.devtools-link{color:var(--text-link);text-decoration:underline;outline-offset:2px;.elements-disclosure &{color:var(--text-link)}devtools-icon{vertical-align:baseline;color:var(--sys-color-primary)}:focus .selected & devtools-icon{color:var(--sys-color-tonal-container)}&:focus-visible{outline-width:unset}&.invalid-link{color:var(--text-disabled);text-decoration:none}&:not(.devtools-link-prevent-click, .invalid-link){cursor:pointer}@media (forced-colors: active){&:not(.devtools-link-prevent-click){forced-color-adjust:none;color:linktext}&:focus-visible{background:Highlight;color:HighlightText}}}\n/*# sourceURL=${import.meta.resolve("./inspectorCommon.css")} */\n`,z=`:host{display:flex;height:100%}devtools-report{flex-grow:1}button.link{color:var(--sys-color-primary);text-decoration:underline;padding:0;border:none;background:none;font-family:inherit;font-size:inherit;height:16px}button.link devtools-icon{vertical-align:sub}.link{color:var(--sys-color-primary);text-decoration:underline;cursor:pointer}\n/*# sourceURL=${import.meta.resolve("./preloadingDetailsReportView.css")} */\n`;const{html:O}=o,j={noElementSelected:"No element selected",selectAnElementForMoreDetails:"Select an element for more details",detailsDetailedInformation:"Detailed information",detailsAction:"Action",detailsStatus:"Status",detailsFailureReason:"Failure reason",detailsRuleSet:"Rule set",automaticallyFellBackToPrefetch:"(automatically fell back to prefetch)",detailedStatusNotTriggered:"Speculative load attempt is not yet triggered.",detailedStatusPending:"Speculative load attempt is eligible but pending.",detailedStatusRunning:"Speculative load is running.",detailedStatusReady:"Speculative load finished and the result is ready for the next navigation.",detailedStatusSuccess:"Speculative load finished and used for a navigation.",detailedStatusFailure:"Speculative load failed.",detailedStatusFallbackToPrefetch:"Speculative load failed, but fallback to prefetch succeeded.",buttonInspect:"Inspect",buttonClickToInspect:"Click to inspect prerendered page",buttonClickToRevealRuleSet:"Click to reveal rule set"},W=e.i18n.registerUIStrings("panels/application/preloading/components/PreloadingDetailsReportView.ts",j),q=e.i18n.getLocalizedString.bind(void 0,W);class _{static detailedStatus({status:t}){switch(t){case"NotTriggered":return q(j.detailedStatusNotTriggered);case"Pending":return q(j.detailedStatusPending);case"Running":return q(j.detailedStatusRunning);case"Ready":return q(j.detailedStatusReady);case"Success":return q(j.detailedStatusSuccess);case"Failure":return q(j.detailedStatusFailure);case"NotSupported":return e.i18n.lockedString("Internal error")}}}class V extends a.LegacyWrapper.WrappableComponent{#e=this.attachShadow({mode:"open"});#t=null;set data(e){this.#t=e,this.#r()}async#r(){await d.write("PreloadingDetailsReportView render",(()=>{if(null===this.#t)return void o.render(O`
          <style>${z}</style>
          <style>${A}</style>
          <div class="empty-state">
            <span class="empty-state-header">${q(j.noElementSelected)}</span>
            <span class="empty-state-description">${q(j.selectAnElementForMoreDetails)}</span>
          </div>
        `,this.#e,{host:this});const e=this.#t.pipeline,t=this.#t.pageURL,r="Failure"===e.getPrerender()?.status&&("Ready"===e.getPrefetch()?.status||"Success"===e.getPrefetch()?.status);o.render(O`
        <style>${z}</style>
        <style>${A}</style>
        <devtools-report
          .data=${{reportTitle:"Speculative Loading Attempt"}}
          jslog=${u.section("preloading-details")}>
          <devtools-report-section-header>${q(j.detailsDetailedInformation)}</devtools-report-section-header>

          ${this.#a()}
          ${this.#o(r)}
          ${this.#i(r)}
          ${this.#n()}
          ${this.#s()}

          ${this.#t.ruleSets.map((e=>this.#l(e,t)))}
        </devtools-report>
      `,this.#e,{host:this})}))}#a(){i(this.#t);const t=this.#t.pipeline.getOriginallyTriggered(),r=this.#t.pipeline.getPrefetch()?.status;let a;if("Prefetch"===t.action&&void 0!==t.requestId&&"NotTriggered"!==r){const{requestId:e,key:{url:r}}=t;a=O`
          <devtools-request-link-icon
            .data=${{affectedRequest:{requestId:e,url:r},requestResolver:this.#t.requestResolver||new l.RequestResolver.RequestResolver,displayURL:!0,urlToDisplay:r}}
          >
          </devtools-request-link-icon>
      `}else a=O`
          <div class="text-ellipsis" title=${t.key.url}>${t.key.url}</div>
      `;return O`
        <devtools-report-key>${e.i18n.lockedString("URL")}</devtools-report-key>
        <devtools-report-value>
          ${a}
        </devtools-report-value>
    `}#o(e){i(this.#t);const r=this.#t.pipeline.getOriginallyTriggered(),a=F(r.action);let n=o.nothing;e&&(n=O`${q(j.automaticallyFellBackToPrefetch)}`);let s=o.nothing;return(()=>{if("Prerender"!==r.action)return;if(null===t.TargetManager.TargetManager.instance().primaryPageTarget())return;const e=t.TargetManager.TargetManager.instance().targets().find((e=>"prerender"===e.targetInfo()?.subtype&&e.inspectedURL()===r.key.url)),a=void 0===e;s=O`
          <devtools-button
            @click=${()=>{void 0!==e&&c.Context.Context.instance().setFlavor(t.Target.Target,e)}}
            .title=${q(j.buttonClickToInspect)}
            .size=${"SMALL"}
            .variant=${"outlined"}
            .disabled=${a}
            jslog=${u.action("inspect-prerendered-page").track({click:!0})}
          >
            ${q(j.buttonInspect)}
          </devtools-button>
      `})(),O`
        <devtools-report-key>${q(j.detailsAction)}</devtools-report-key>
        <devtools-report-value>
          <div class="text-ellipsis" title="">
            ${a}
            ${n}
            ${s}
          </div>
        </devtools-report-value>
    `}#i(e){i(this.#t);const t=this.#t.pipeline.getOriginallyTriggered(),r=e?q(j.detailedStatusFallbackToPrefetch):_.detailedStatus(t);return O`
        <devtools-report-key>${q(j.detailsStatus)}</devtools-report-key>
        <devtools-report-value>
          ${r}
        </devtools-report-value>
    `}#n(){i(this.#t);const e=this.#t.pipeline.getOriginallyTriggered();if("Prefetch"!==e.action)return o.nothing;const t=k(e);return null===t?o.nothing:O`
        <devtools-report-key>${q(j.detailsFailureReason)}</devtools-report-key>
        <devtools-report-value>
          ${t}
        </devtools-report-value>
    `}#s(){i(this.#t);const e=this.#t.pipeline.getOriginallyTriggered();if("Prerender"!==e.action)return o.nothing;const t=R(e);return null===t?o.nothing:O`
        <devtools-report-key>${q(j.detailsFailureReason)}</devtools-report-key>
        <devtools-report-value>
          ${t}
        </devtools-report-value>
    `}#l(e,t){const r=N(e,t);return O`
      <devtools-report-key>${q(j.detailsRuleSet)}</devtools-report-key>
      <devtools-report-value>
        <div class="text-ellipsis" title="">
          <button class="link" role="link"
            @click=${()=>{s.Revealer.reveal(new p.PreloadingForward.RuleSetView(e.id))}}
            title=${q(j.buttonClickToRevealRuleSet)}
            style=${o.Directives.styleMap({color:"var(--sys-color-primary)","text-decoration":"underline"})}
            jslog=${u.action("reveal-rule-set").track({click:!0})}
          >
            ${r}
          </button>
        </div>
      </devtools-report-value>
    `}}customElements.define("devtools-resources-preloading-details-report-view",V);var G=Object.freeze({__proto__:null,PreloadingDetailsReportView:V}),X=`#container{padding:6px 12px;border-bottom:1px solid var(--sys-color-divider);align-items:center;display:flex}#contents .key{grid-column-start:span 2;font-weight:bold}#contents .value{grid-column-start:span 2;margin-top:var(--sys-size-6)}#footer{margin-top:var(--sys-size-6);margin-bottom:var(--sys-size-2);white-space:nowrap;overflow:hidden;text-overflow:ellipsis;grid-column-start:span 2}x-link{color:var(--sys-color-primary);text-decoration-line:underline}\n/*# sourceURL=${import.meta.resolve("./preloadingDisabledInfobar.css")} */\n`;const{html:J}=o,K={infobarPreloadingIsDisabled:"Speculative loading is disabled",infobarPreloadingIsForceEnabled:"Speculative loading is force-enabled",titleReasonsPreventingPreloading:"Reasons preventing speculative loading",headerDisabledByPreference:"User settings or extensions",descriptionDisabledByPreference:"Speculative loading is disabled because of user settings or an extension. Go to {PH1} to update your preference. Go to {PH2} to disable any extension that blocks speculative loading.",preloadingPagesSettings:"Preload pages settings",extensionsSettings:"Extensions settings",headerDisabledByDataSaver:"Data Saver",descriptionDisabledByDataSaver:"Speculative loading is disabled because of the operating system's Data Saver mode.",headerDisabledByBatterySaver:"Battery Saver",descriptionDisabledByBatterySaver:"Speculative loading is disabled because of the operating system's Battery Saver mode.",headerDisabledByHoldbackPrefetchSpeculationRules:"Prefetch was disabled, but is force-enabled now",descriptionDisabledByHoldbackPrefetchSpeculationRules:"Prefetch is forced-enabled because DevTools is open. When DevTools is closed, prefetch will be disabled because this browser session is part of a holdback group used for performance comparisons.",headerDisabledByHoldbackPrerenderSpeculationRules:"Prerendering was disabled, but is force-enabled now",descriptionDisabledByHoldbackPrerenderSpeculationRules:"Prerendering is forced-enabled because DevTools is open. When DevTools is closed, prerendering will be disabled because this browser session is part of a holdback group used for performance comparisons.",footerLearnMore:"Learn more"},Q=e.i18n.registerUIStrings("panels/application/preloading/components/PreloadingDisabledInfobar.ts",K),Y=e.i18n.getLocalizedString.bind(void 0,Q);class Z extends a.LegacyWrapper.WrappableComponent{#e=this.attachShadow({mode:"open"});#t={disabledByPreference:!1,disabledByDataSaver:!1,disabledByBatterySaver:!1,disabledByHoldbackPrefetchSpeculationRules:!1,disabledByHoldbackPrerenderSpeculationRules:!1};connectedCallback(){this.#r()}set data(e){this.#t=e,this.#r()}async#r(){await d.write("PreloadingDisabledInfobar render",(()=>{o.render(this.#d(),this.#e,{host:this})}))}#d(){const e=this.#t.disabledByHoldbackPrefetchSpeculationRules||this.#t.disabledByHoldbackPrerenderSpeculationRules;let t;if(this.#t.disabledByPreference||this.#t.disabledByDataSaver||this.#t.disabledByBatterySaver)t=Y(K.infobarPreloadingIsDisabled);else{if(!e)return o.nothing;t=Y(K.infobarPreloadingIsForceEnabled)}return J`
      <style>${X}</style>
      <div id='container'>
        <span id='header'>
          ${t}
        </span>

        <devtools-button-dialog
          .data=${{iconName:"info",variant:"icon",closeButton:!0,position:"auto",horizontalAlignment:"auto",closeOnESC:!0,closeOnScroll:!1,dialogTitle:Y(K.titleReasonsPreventingPreloading)}}
          jslog=${u.dialog("preloading-disabled").track({resize:!0,keydown:"Escape"})}
        >
          ${this.#c()}
        </devtools-button-dialog>
      </div>
    `}#c(){const e="https://developer.chrome.com/blog/prerender-pages/",t=c.XLink.XLink.create(e,Y(K.footerLearnMore),void 0,void 0,"learn-more"),r=c.Fragment.html`
      <x-link class="icon-link devtools-link" tabindex="0" href="${e}"></x-link>
    `;return J`
      <div id='contents'>
        <devtools-report>
          ${this.#u()}
          ${this.#p()}
          ${this.#h()}
          ${this.#g()}
          ${this.#b()}
        </devtools-report>
        <div id='footer'>
          ${t}
          ${r}
        </div>
      </div>
    `}#v(e,t,r){return e?J`
      <div class='key'>
        ${t}
      </div>
      <div class='value'>
        ${r}
      </div>
    `:o.nothing}#u(){const t=new h.ChromeLink.ChromeLink;t.href="chrome://settings/performance",t.textContent=Y(K.preloadingPagesSettings);const r=new h.ChromeLink.ChromeLink;r.href="chrome://extensions",r.textContent=Y(K.extensionsSettings);const a=e.i18n.getFormatLocalizedString(Q,K.descriptionDisabledByPreference,{PH1:t,PH2:r});return this.#v(this.#t.disabledByPreference,Y(K.headerDisabledByPreference),a)}#p(){return this.#v(this.#t.disabledByDataSaver,Y(K.headerDisabledByDataSaver),Y(K.descriptionDisabledByDataSaver))}#h(){return this.#v(this.#t.disabledByBatterySaver,Y(K.headerDisabledByBatterySaver),Y(K.descriptionDisabledByBatterySaver))}#g(){return this.#v(this.#t.disabledByHoldbackPrefetchSpeculationRules,Y(K.headerDisabledByHoldbackPrefetchSpeculationRules),Y(K.descriptionDisabledByHoldbackPrefetchSpeculationRules))}#b(){return this.#v(this.#t.disabledByHoldbackPrerenderSpeculationRules,Y(K.headerDisabledByHoldbackPrerenderSpeculationRules),Y(K.descriptionDisabledByHoldbackPrerenderSpeculationRules))}}customElements.define("devtools-resources-preloading-disabled-infobar",Z);var ee=Object.freeze({__proto__:null,PreloadingDisabledInfobar:Z}),te=`:host{overflow:auto;height:100%}.preloading-container{height:100%;display:flex;flex-direction:column}.preloading-header{font-size:15px;background-color:var(--sys-color-cdt-base-container);padding:1px 4px}.preloading-placeholder{flex-grow:1;display:flex;align-items:center;justify-content:center;font-size:13px;color:var(--sys-color-token-subtle)}devtools-data-grid{flex:auto}.inline-icon{vertical-align:text-bottom}\n/*# sourceURL=${import.meta.resolve("./preloadingGrid.css")} */\n`;const{PreloadingStatus:re}=t.PreloadingModel,ae={action:"Action",ruleSet:"Rule set",status:"Status",prefetchFallbackReady:"Prefetch fallback ready"},oe=e.i18n.registerUIStrings("panels/application/preloading/components/PreloadingGrid.ts",ae),ie=e.i18n.getLocalizedString.bind(void 0,oe),{render:ne,html:se,Directives:{styleMap:le}}=o;class de extends a.LegacyWrapper.WrappableComponent{#e=this.attachShadow({mode:"open"});#t=null;connectedCallback(){this.#r()}update(e){this.#t=e,this.#r()}#r(){if(!this.#t)return;const{rows:t,pageURL:r}=this.#t,a=""===r?null:new s.ParsedURL.ParsedURL(r).securityOrigin();ne(se`
      <style>${te}</style>
      <div class="preloading-container">
        <devtools-data-grid striped @select=${this.#f}>
          <table>
            <tr>
              <th id="url" weight="40" sortable>${e.i18n.lockedString("URL")}</th>
              <th id="action" weight="15" sortable>${ie(ae.action)}</th>
              <th id="rule-set" weight="20" sortable>${ie(ae.ruleSet)}</th>
              <th id="status" weight="40" sortable>${ie(ae.status)}</th>
            </tr>
            ${t.map((e=>{const t=e.pipeline.getOriginallyTriggered(),o=e.pipeline.getPrefetch()?.status,i=e.pipeline.getPrerender()?.status,n="Failure"===i&&("Ready"===o||"Success"===o),s="Failure"===e.pipeline.getOriginallyTriggered().status;return se`<tr data-id=${e.id}>
                <td title=${t.key.url}>${this.#m(e,a)}</td>
                <td>${F(t.action)}</td>
                <td>${0===e.ruleSets.length?"":N(e.ruleSets[0],r)}</td>
                <td>
                  <div style=${le({color:n?"var(--sys-color-orange-bright)":s?"var(--sys-color-error)":"var(--sys-color-on-surface)"})}>
                    ${s||n?se`
                      <devtools-icon
                        name=${n?"warning-filled":"cross-circle-filled"}
                        style=${le({width:"16px",height:"16px",color:n?"var(--sys-color-warning)":"var(--sys-color-error)","vertical-align":"sub"})}
                      ></devtools-icon>`:""}
                    ${n?ie(ae.prefetchFallbackReady):T(t)}
                  </div>
                </td>
              </tr>`}))}
          </table>
        </devtools-data-grid>
      </div>
    `,this.#e,{host:this})}#f(e){this.dispatchEvent(new CustomEvent("select",{detail:e.detail.dataset.id}))}#m(e,t){const r=e.pipeline.getOriginallyTriggered().key.url;return t&&r.startsWith(t)?r.slice(t.length):r}}customElements.define("devtools-resources-preloading-grid",de);var ce=Object.freeze({__proto__:null,PreloadingGrid:de,i18nString:ie});const ue={headerName:"Header name",initialNavigationValue:"Value in initial navigation",activationNavigationValue:"Value in activation navigation",missing:"(missing)"},pe=e.i18n.registerUIStrings("panels/application/preloading/components/PreloadingMismatchedHeadersGrid.ts",ue),he=e.i18n.getLocalizedString.bind(void 0,pe),{render:ge,html:be}=o;class ve extends a.LegacyWrapper.WrappableComponent{#e=this.attachShadow({mode:"open"});#t=null;connectedCallback(){this.#r()}set data(e){null!==e.mismatchedHeaders&&(this.#t=e,this.#r())}#r(){this.#t?.mismatchedHeaders&&ge(be`
        <style>${te}</style>
        <div class="preloading-container">
          <devtools-data-grid striped inline>
            <table>
              <tr>
                <th id="header-name" weight="30" sortable>
                  ${he(ue.headerName)}
                </th>
                <th id="initial-value" weight="30" sortable>
                  ${he(ue.initialNavigationValue)}
                </th>
                <th id="activation-value" weight="30" sortable>
                  ${he(ue.activationNavigationValue)}
                </th>
              </tr>
              ${this.#t.mismatchedHeaders.map((e=>be`
                <tr>
                  <td>${e.headerName}</td>
                  <td>${e.initialValue??he(ue.missing)}</td>
                  <td>${e.activationValue??he(ue.missing)}</td>
                </tr>
              `))}
            </table>
          </devtools-data-grid>
        </div>
      `,this.#e,{host:this})}}customElements.define("devtools-resources-preloading-mismatched-headers-grid",ve);var fe=Object.freeze({__proto__:null,PreloadingMismatchedHeadersGrid:ve,i18nString:he}),me=`:host{display:block;height:100%}.placeholder{display:flex;height:100%}.ruleset-header{padding:4px 8px;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;border-bottom:1px solid var(--sys-color-divider)}.ruleset-header devtools-icon{vertical-align:sub}\n/*# sourceURL=${import.meta.resolve("./RuleSetDetailsView.css")} */\n`;const{html:ye}=o,we={noElementSelected:"No element selected",selectAnElementForMoreDetails:"Select an element for more details"},Se=e.i18n.registerUIStrings("panels/application/preloading/components/RuleSetDetailsView.ts",we),Pe=e.i18n.getLocalizedString.bind(void 0,Se),xe=await v.CodeHighlighter.languageFromMIME("application/json");class ke extends a.LegacyWrapper.WrappableComponent{#e=this.attachShadow({mode:"open"});#t=null;#y=!0;#w;set data(e){this.#t=e,this.#r()}set shouldPrettyPrint(e){this.#y=e}async#r(){await d.write("RuleSetDetailsView render",(async()=>{if(null===this.#t)return void o.render(ye`
          <style>${me}</style>
          <style>${A}</style>
          <div class="placeholder">
            <div class="empty-state">
              <span class="empty-state-header">${Pe(we.noElementSelected)}</span>
              <span class="empty-state-description">${Pe(we.selectAnElementForMoreDetails)}</span>
            </div>
          </div>
      `,this.#e,{host:this});const e=await this.#S();o.render(ye`
        <style>${me}</style>
        <style>${A}</style>
        <div class="content">
          <div class="ruleset-header" id="ruleset-url">${this.#t?.url||t.TargetManager.TargetManager.instance().inspectedURL()}</div>
          ${this.#P()}
        </div>
        <div class="text-ellipsis">
          ${this.#x(e)}
        </div>
      `,this.#e,{host:this})}))}#P(){return i(this.#t),void 0===this.#t.errorMessage?o.nothing:ye`
      <div class="ruleset-header">
        <devtools-icon
          .data=${{iconName:"cross-circle",color:"var(--icon-error)",width:"16px",height:"16px"}}>
        </devtools-icon>
        <span id="error-message-text">${this.#t.errorMessage}</span>
      </div>
    `}#x(e){return this.#w=b.EditorState.create({doc:e,extensions:[f.Config.baseConfiguration(e||""),b.lineNumbers(),b.EditorState.readOnly.of(!0),xe,b.syntaxHighlighting(v.CodeHighlighter.highlightStyle)]}),ye`
      <devtools-text-editor .style.flexGrow=${"1"} .state=${this.#w}></devtools-text-editor>
    `}async#S(){if(this.#y&&void 0!==this.#t?.sourceText){return(await g.ScriptFormatter.formatScriptContent("application/json",this.#t.sourceText)).formattedContent}return this.#t?.sourceText||""}}customElements.define("devtools-resources-rulesets-details-view",ke);var Re=Object.freeze({__proto__:null,RuleSetDetailsView:ke}),Ne=`:host{overflow:auto;height:100%}.ruleset-container{height:100%;display:flex;flex-direction:column}devtools-data-grid{flex:auto}.inline-icon{vertical-align:text-bottom}\n/*# sourceURL=${import.meta.resolve("./ruleSetGrid.css")} */\n`;const{html:Fe,Directives:{styleMap:Te}}=o,Ee={ruleSet:"Rule set",status:"Status",clickToOpenInElementsPanel:"Click to open in Elements panel",clickToOpenInNetworkPanel:"Click to open in Network panel",errors:"{errorCount, plural, =1 {# error} other {# errors}}",buttonRevealPreloadsAssociatedWithRuleSet:"Reveal speculative loads associated with this rule set"},$e=e.i18n.registerUIStrings("panels/application/preloading/components/RuleSetGrid.ts",Ee),Ie=e.i18n.getLocalizedString.bind(void 0,$e);class Ue extends a.LegacyWrapper.WrappableComponent{#e=this.attachShadow({mode:"open"});#t=null;connectedCallback(){this.#r()}update(e){this.#t=e,this.#r()}async#k(e){void 0!==e.backendNodeId?await this.#R(e):void 0!==e.url&&e.requestId&&await this.#N(e)}async#R(e){i(e.backendNodeId);const r=t.TargetManager.TargetManager.instance().scopeTarget();null!==r&&await s.Revealer.reveal(new t.DOMModel.DeferredDOMNode(r,e.backendNodeId))}async#N(e){i(e.requestId);const r=t.TargetManager.TargetManager.instance().scopeTarget()?.model(t.NetworkManager.NetworkManager)?.requestForId(e.requestId)||null;if(null===r)return;const a=m.UIRequestLocation.UIRequestLocation.tab(r,"preview",{clearFilter:!1});await s.Revealer.reveal(a)}async#F(e){await s.Revealer.reveal(new p.PreloadingForward.AttemptViewWithFilter(e.id))}#r(){if(null===this.#t)return;const{rows:e,pageURL:t}=this.#t;o.render(Fe`
        <style>${Ne}</style>
        <div class="ruleset-container" jslog=${u.pane("preloading-rules")}>
          <devtools-data-grid striped @select=${this.#T}>
            <table>
              <tr>
                <th id="rule-set" weight="20" sortable>
                  ${Ie(Ee.ruleSet)}
                </th>
                <th id="status" weight="80" sortable>
                  ${Ie(Ee.status)}
                </th>
              </tr>
              ${e.map((({ruleSet:e,preloadsStatusSummary:r})=>{const a=N(e,t),o=void 0!==e.backendNodeId,i=void 0!==e.url&&e.requestId;return Fe`
                  <tr data-id=${e.id}>
                    <td>
                      ${o||i?Fe`
                        <button class="link" role="link"
                            @click=${()=>this.#k(e)}
                            title=${Ie(o?Ee.clickToOpenInElementsPanel:Ee.clickToOpenInNetworkPanel)}
                            style=${Te({border:"none",background:"none",color:"var(--icon-link)",cursor:"pointer","text-decoration":"underline","padding-inline-start":"0","padding-inline-end":"0"})}
                            jslog=${u.action(o?"reveal-in-elements":"reveal-in-network").track({click:!0})}
                          >
                            <devtools-icon name=${o?"code-circle":"arrow-up-down-circle"}
                              style=${Te({color:"var(--icon-link)",width:"16px",height:"16px","vertical-align":"sub"})}
                            ></devtools-icon>
                            ${a}
                          </button>`:a}
                  </td>
                  <td>
                    ${void 0!==e.errorType?Fe`
                      <span style=${Te({color:"var(--sys-color-error)"})}>
                        ${Ie(Ee.errors,{errorCount:1})}
                      </span>`:""}
                    ${"SourceIsNotJsonObject"!==e.errorType?Fe`
                      <button class="link" role="link"
                        @click=${()=>this.#F(e)}
                        title=${Ie(Ee.buttonRevealPreloadsAssociatedWithRuleSet)}
                        style=${Te({color:"var(--sys-color-primary)","text-decoration":"underline",cursor:"pointer",border:"none",background:"none","padding-inline-start":"0","padding-inline-end":"0"})}
                        jslog=${u.action("reveal-preloads").track({click:!0})}>
                        ${r}
                      </button>`:""}
                  </td>
                </tr>
              `}))}
            </table>
          </devtools-data-grid>
        </div>
      `,this.#e,{host:this})}#T(e){const t=e.detail.dataset.id;void 0!==t&&this.dispatchEvent(new CustomEvent("select",{detail:t}))}}customElements.define("devtools-resources-ruleset-grid",Ue);var Ce=Object.freeze({__proto__:null,RuleSetGrid:Ue,i18nString:Ie}),De=`:host{overflow:auto;height:100%}button{font-size:inherit}devtools-report{padding:1em 0}devtools-report-section-header{padding-bottom:0;margin-bottom:-1.5em}devtools-report-section{min-width:fit-content}devtools-report-divider{margin:1em 0}.reveal-links{white-space:nowrap}.link{border:none;background:none;color:var(--sys-color-primary);text-decoration:underline;cursor:pointer;outline-offset:2px;padding:0}.status-badge-container{white-space:nowrap;margin:8px 0 24px}.status-badge-container span{margin-right:2px}.status-badge{border-radius:4px;padding:4px;devtools-icon{width:16px;height:16px}}.status-badge-success{background:var(--sys-color-tertiary-container)}.status-badge-failure{background:var(--sys-color-error-container)}.status-badge-neutral{background:var(--sys-color-neutral-container)}\n/*# sourceURL=${import.meta.resolve("./usedPreloadingView.css")} */\n`;const{html:Le}=o,Be={speculativeLoadingStatusForThisPage:"Speculative loading status for this page",detailsFailureReason:"Failure reason",downgradedPrefetchUsed:"The initiating page attempted to prerender this page's URL. The prerender failed, but the resulting response body was still used as a prefetch.",prefetchUsed:"This page was successfully prefetched.",prerenderUsed:"This page was successfully prerendered.",prefetchFailed:"The initiating page attempted to prefetch this page's URL, but the prefetch failed, so a full navigation was performed instead.",prerenderFailed:"The initiating page attempted to prerender this page's URL, but the prerender failed, so a full navigation was performed instead.",noPreloads:"The initiating page did not attempt to speculatively load this page's URL.",currentURL:"Current URL",preloadedURLs:"URLs being speculatively loaded by the initiating page",speculationsInitiatedByThisPage:"Speculations initiated by this page",viewAllRules:"View all speculation rules",viewAllSpeculations:"View all speculations",learnMore:"Learn more: Speculative loading on developer.chrome.com",mismatchedHeadersDetail:"Mismatched HTTP request headers",badgeSuccess:"Success",badgeFailure:"Failure",badgeNoSpeculativeLoads:"No speculative loads",badgeNotTriggeredWithCount:"{n, plural, =1 {# not triggered} other {# not triggered}}",badgeInProgressWithCount:"{n, plural, =1 {# in progress} other {# in progress}}",badgeSuccessWithCount:"{n, plural, =1 {# success} other {# success}}",badgeFailureWithCount:"{n, plural, =1 {# failure} other {# failures}}"},Me=e.i18n.registerUIStrings("panels/application/preloading/components/UsedPreloadingView.ts",Be),He=e.i18n.getLocalizedString.bind(void 0,Me);class Ae extends a.LegacyWrapper.WrappableComponent{#e=this.attachShadow({mode:"open"});#t={pageURL:"",previousAttempts:[],currentAttempts:[]};set data(e){this.#t=e,this.#r()}async#r(){await d.write("UsedPreloadingView render",(()=>{o.render(this.#d(),this.#e,{host:this})}))}#d(){return Le`
      <style>${De}</style>
      <devtools-report>
        ${this.#E()}

        <devtools-report-divider></devtools-report-divider>

        ${this.#$()}

        <devtools-report-divider></devtools-report-divider>

        <devtools-report-section>
          ${c.XLink.XLink.create("https://developer.chrome.com/blog/prerender-pages/",He(Be.learnMore),"link",void 0,"learn-more")}
        </devtools-report-section>
      </devtools-report>
    `}#E(){const e=s.ParsedURL.ParsedURL.urlWithoutHash(this.#t.pageURL),t=this.#t.previousAttempts.filter((t=>s.ParsedURL.ParsedURL.urlWithoutHash(t.key.url)===e)),r=t.filter((e=>"Prefetch"===e.key.action))[0],a=t.filter((e=>"Prerender"===e.key.action))[0];let n,l,d,c="NoPreloads";switch(c="Failure"===a?.status&&"Success"===r?.status?"DowngradedPrerenderToPrefetchAndUsed":"Success"===r?.status?"PrefetchUsed":"Success"===a?.status?"PrerenderUsed":"Failure"===r?.status?"PrefetchFailed":"Failure"===a?.status?"PrerenderFailed":"NoPreloads",c){case"DowngradedPrerenderToPrefetchAndUsed":n=this.#I(),l=Le`${He(Be.downgradedPrefetchUsed)}`;break;case"PrefetchUsed":n=this.#I(),l=Le`${He(Be.prefetchUsed)}`;break;case"PrerenderUsed":n=this.#I(),l=Le`${He(Be.prerenderUsed)}`;break;case"PrefetchFailed":n=this.#U(),l=Le`${He(Be.prefetchFailed)}`;break;case"PrerenderFailed":n=this.#U(),l=Le`${He(Be.prerenderFailed)}`;break;case"NoPreloads":n=this.#C(He(Be.badgeNoSpeculativeLoads)),l=Le`${He(Be.noPreloads)}`}"PrefetchFailed"===c?(i(r),d=k(r)):"PrerenderFailed"!==c&&"DowngradedPrerenderToPrefetchAndUsed"!==c||(i(a),d=R(a));let u=o.nothing;return void 0!==d&&(u=Le`
      <devtools-report-section-header>${He(Be.detailsFailureReason)}</devtools-report-section-header>
      <devtools-report-section>
        ${d}
      </devtools-report-section>
      `),Le`
      <devtools-report-section-header>${He(Be.speculativeLoadingStatusForThisPage)}</devtools-report-section-header>
      <devtools-report-section>
        <div>
          <div class="status-badge-container">
            ${n}
          </div>
          <div>
            ${l}
          </div>
        </div>
      </devtools-report-section>

      ${u}

      ${this.#D(c)}
      ${this.#L()}
    `}#D(e){if("NoPreloads"!==e||0===this.#t.previousAttempts.length)return o.nothing;const t=this.#t.previousAttempts.map((e=>({url:e.key.url,action:e.key.action,status:e.status}))),r={pageURL:this.#t.pageURL,rows:t};return Le`
      <devtools-report-section-header>${He(Be.currentURL)}</devtools-report-section-header>
      <devtools-report-section>
        ${c.XLink.XLink.create(this.#t.pageURL,void 0,"link",void 0,"current-url")}
      </devtools-report-section>

      <devtools-report-section-header>${He(Be.preloadedURLs)}</devtools-report-section-header>
      <devtools-report-section
      jslog=${u.section("preloaded-urls")}>
        <devtools-resources-mismatched-preloading-grid
          .data=${r}></devtools-resources-mismatched-preloading-grid>
      </devtools-report-section>
    `}#L(){const e=this.#t.previousAttempts.find((e=>"Prerender"===e.action&&null!==e.mismatchedHeaders));if(void 0===e)return o.nothing;if(e.key.url!==this.#t.pageURL)throw new Error("unreachable");return Le`
      <devtools-report-section-header>${He(Be.mismatchedHeadersDetail)}</devtools-report-section-header>
      <devtools-report-section>
        <devtools-resources-preloading-mismatched-headers-grid
          .data=${e}></devtools-resources-preloading-mismatched-headers-grid>
      </devtools-report-section>
    `}#$(){const e=this.#t.currentAttempts.reduce(((e,t)=>(e.set(t.status,(e.get(t.status)??0)+1),e)),new Map),t=e.get("NotTriggered")??0,r=e.get("Ready")??0,a=e.get("Failure")??0,o=(e.get("Pending")??0)+(e.get("Running")??0),i=[];0===this.#t.currentAttempts.length&&i.push(this.#C(He(Be.badgeNoSpeculativeLoads))),t>0&&i.push(this.#C(He(Be.badgeNotTriggeredWithCount,{n:t}))),o>0&&i.push(this.#C(He(Be.badgeInProgressWithCount,{n:o}))),r>0&&i.push(this.#I(r)),a>0&&i.push(this.#U(a));return Le`
      <devtools-report-section-header>${He(Be.speculationsInitiatedByThisPage)}</devtools-report-section-header>
      <devtools-report-section>
        <div>
          <div class="status-badge-container">
            ${i}
          </div>

          <div class="reveal-links">
            <button class="link devtools-link" @click=${()=>{s.Revealer.reveal(new p.PreloadingForward.RuleSetView(null))}}
            jslog=${u.action("view-all-rules").track({click:!0})}>
              ${He(Be.viewAllRules)}
            </button>
           
            <button class="link devtools-link" @click=${()=>{s.Revealer.reveal(new p.PreloadingForward.AttemptViewWithFilter(null))}}
            jslog=${u.action("view-all-speculations").track({click:!0})}>
             ${He(Be.viewAllSpeculations)}
            </button>
          </div>
        </div>
      </devtools-report-section>
    `}#I(e){let t;return t=void 0===e?He(Be.badgeSuccess):He(Be.badgeSuccessWithCount,{n:e}),this.#B("status-badge status-badge-success","check-circle",t)}#U(e){let t;return t=void 0===e?He(Be.badgeFailure):He(Be.badgeFailureWithCount,{n:e}),this.#B("status-badge status-badge-failure","cross-circle",t)}#C(e){return this.#B("status-badge status-badge-neutral","clear",e)}#B(e,t,r){return Le`
      <span class=${e}>
        <devtools-icon name=${t}></devtools-icon>
        <span>
          ${r}
        </span>
      </span>
    `}}customElements.define("devtools-resources-used-preloading-view",Ae);var ze=Object.freeze({__proto__:null,UsedPreloadingView:Ae});export{H as MismatchedPreloadingGrid,G as PreloadingDetailsReportView,ee as PreloadingDisabledInfobar,ce as PreloadingGrid,fe as PreloadingMismatchedHeadersGrid,Re as RuleSetDetailsView,Ce as RuleSetGrid,ze as UsedPreloadingView};
