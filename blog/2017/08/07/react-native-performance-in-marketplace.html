<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.70">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="React Native Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="React Native Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-41298772-2","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-41298772-2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-41298772-2",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="React Native" href="/opensearch.xml">
<script src="https://cdn.jsdelivr.net/npm/focus-visible@5.2.0/dist/focus-visible.min.js" defer="defer"></script>
<script src="https://snack.expo.io/embed.js" defer="defer"></script><title data-react-helmet="true">React Native Performance in Marketplace ¬∑ React Native</title><meta data-react-helmet="true" name="twitter:image:alt" content="Image for React Native Performance in Marketplace ¬∑ React Native"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" name="description" content="A framework for building native apps using React"><meta data-react-helmet="true" property="og:title" content="React Native"><meta data-react-helmet="true" property="og:description" content="A framework for building native apps using React"><meta data-react-helmet="true" property="og:url" content="https://reactnative.dev/"><meta data-react-helmet="true" property="og:image" content="https://reactnative.dev/img/logo-og.png"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="twitter:image" content="https://reactnative.dev/img/logo-og.png"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/styles.9eb50f2e.css">
<link rel="stylesheet" href="/main.3de2b5ef.css">
<link rel="preload" href="/styles.1b71bc8a.js" as="script">
<link rel="preload" href="/runtime~main.7a0aa3e2.js" as="script">
<link rel="preload" href="/main.253479d9.js" as="script">
<link rel="preload" href="/1.4dffec5b.js" as="script">
<link rel="preload" href="/2.8fcdf5b9.js" as="script">
<link rel="preload" href="/3.0bb1235f.js" as="script">
<link rel="preload" href="/01a85c17.1b4f80ef.js" as="script">
<link rel="preload" href="/18b93cb3.702d1c1f.js" as="script">
<link rel="preload" href="/1be78505.eb68720a.js" as="script">
<link rel="preload" href="/1f391b9e.9e4e7e5d.js" as="script">
<link rel="preload" href="/5fc994c2.786b5b61.js" as="script">
<link rel="preload" href="/6875c492.2b7d2786.js" as="script">
<link rel="preload" href="/a6aa9e1f.6a63439b.js" as="script">
<link rel="preload" href="/c4f5d8e4.e34b2e24.js" as="script">
<link rel="preload" href="/ccc49370.f3af674c.js" as="script">
<link rel="preload" href="/942.97e2734e.js" as="script">
<link rel="preload" href="/e4eeaf16.4baa9e2e.js" as="script">
<link rel="preload" href="/96127592.938d7884.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_3aLp">Skip to main content</button></nav><nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg aria-label="Menu" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/header_logo.svg" alt="React Native" class="themedImage_phiS themedImage--light_VJaY navbar__logo"><img src="/img/header_logo.svg" alt="React Native" class="themedImage_phiS themedImage--dark_1NF3 navbar__logo"><strong class="navbar__title">React Native</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/docs/getting-started">0.63</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/getting-started">Next</a></li><li><a class="dropdown__link" href="/docs/getting-started">0.63</a></li><li><a class="dropdown__link" href="/docs/0.62/getting-started">0.62</a></li><li><a class="dropdown__link" href="/docs/0.61/getting-started">0.61</a></li><li><a class="dropdown__link" href="/docs/0.60/getting-started">0.60</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/docs/components-and-apis">Components</a><a class="navbar__item navbar__link" href="/docs/accessibilityinfo">API</a><a class="navbar__item navbar__link" href="/help">Community</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a href="https://github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_Bh6k"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_1UDy">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_1UDy">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span></span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/header_logo.svg" alt="React Native" class="themedImage_phiS themedImage--light_VJaY navbar__logo"><img src="/img/header_logo.svg" alt="React Native" class="themedImage_phiS themedImage--dark_1NF3 navbar__logo"><strong class="navbar__title">React Native</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/components-and-apis">Components</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/accessibilityinfo">API</a></li><li class="menu__list-item"><a class="menu__link" href="/help">Community</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/getting-started">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">0.63</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.62/getting-started">0.62</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.61/getting-started">0.61</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.60/getting-started">0.60</a></li><li class="menu__list-item"><a class="menu__link" href="/versions">All versions</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="menu__link navbar-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_1wv2"><h3 class="sidebarItemTitle_3lOc">All Blog Posts</h3><ul class="sidebarItemList_2WIo"><h4 class="sidebarItemTitle_3lOc">2020</h4><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2020/07/23/docs-update">React Native Documentation Update</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2020/07/17/react-native-principles">React Native Team Principles</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2020/07/06/version-0.63">Announcing React Native 0.63 with LogBox</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2020/03/26/version-0.62">Announcing React Native 0.62 with Flipper</a></li><h4 class="sidebarItemTitle_3lOc">2019</h4><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2019/11/18/react-native-doctor">Meet Doctor, a new React Native command</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2019/09/18/version-0.61">Announcing React Native 0.61 with Fast Refresh</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2019/07/17/hermes">Meet Hermes, a new JavaScript Engine optimized for React Native</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2019/07/03/version-60">Announcing React Native 0.60</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2019/06/12/react-native-open-source-update">React Native Open Source Update June 2019</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2019/05/01/react-native-at-f8-and-podcast">React Native at F8 and Open Source Podcast</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2019/03/12/releasing-react-native-059">Releasing React Native 0.59</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2019/03/01/react-native-open-source-update">React Native Open Source Update March 2019</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2019/01/07/state-of-react-native-community">The State of the React Native Community in 2018</a></li><h4 class="sidebarItemTitle_3lOc">2018</h4><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2018/11/01/oss-roadmap">Open Source Roadmap</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2018/08/27/wkwebview">Introducing new iOS WebViews</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2018/08/13/react-native-accessibility-updates">Accessibility API Updates</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2018/07/04/releasing-react-native-056">Releasing 0.56</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2018/06/14/state-of-react-native-2018">State of React Native 2018</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2018/05/07/using-typescript-with-react-native">Using TypeScript with React Native</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2018/04/09/build-com-app">Built with React Native - The Build.com app</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2018/03/22/building-input-accessory-view-for-react-native">Building &lt;InputAccessoryView&gt; For React Native</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2018/03/05/AWS-app-sync">Using AWS with React Native</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2018/01/18/implementing-twitters-app-loading-animation-in-react-native">Implementing Twitter‚Äôs App Loading Animation in React Native</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2018/01/09/react-native-monthly-6">React Native Monthly #6</a></li><h4 class="sidebarItemTitle_3lOc">2017</h4><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2017/11/06/react-native-monthly-5">React Native Monthly #5</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2017/09/21/react-native-monthly-4">React Native Monthly #4</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2017/08/30/react-native-monthly-3">React Native Monthly #3</a></li><li class="sidebarItem_iPNH"><a aria-current="page" class="sidebarItemLink_2E17 sidebarItemLinkActive_2Dvr" href="/blog/2017/08/07/react-native-performance-in-marketplace">React Native Performance in Marketplace</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2017/07/28/react-native-monthly-2">React Native Monthly #2</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2017/06/21/react-native-monthly-1">React Native Monthly #1</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2017/03/13/better-list-views">Better List Views in React Native</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2017/03/13/idx-the-existential-function">idx: The Existential Function</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2017/03/13/introducing-create-react-native-app">Introducing Create React Native App</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2017/02/14/using-native-driver-for-animated">Using Native Driver for Animated</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2017/01/07/monthly-release-cadence">A Monthly Release Cadence: Releasing December and January RC</a></li><h4 class="sidebarItemTitle_3lOc">2016</h4><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2016/12/05/easier-upgrades">Easier Upgrades Thanks to Git</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2016/11/08/introducing-button-yarn-and-a-public-roadmap">Introducing Button, Faster Installs with Yarn, and a Public Roadmap</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2016/10/25/0.36-headless-js-the-keyboard-api-and-more">0.36: Headless JS, the Keyboard API, &amp; more</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2016/09/08/exponent-talks-unraveling-navigation">Expo Talks: Adam on Unraveling Navigation</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2016/08/19/right-to-left-support-for-react-native-apps">Right-to-Left Layout Support For React Native Apps</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2016/08/12/react-native-meetup-san-francisco">San Francisco Meetup Recap</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2016/07/06/toward-better-documentation">Toward Better Documentation</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2016/04/13/react-native-a-year-in-review">React Native: A year in review</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2016/03/28/dive-into-react-native-performance">Dive into React Native Performance</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2016/03/24/introducing-hot-reloading">Introducing Hot Reloading</a></li><h4 class="sidebarItemTitle_3lOc">2015</h4><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2015/11/23/making-react-native-apps-accessible">Making React Native apps accessible</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2015/09/14/react-native-for-android">React Native for Android: How we built the first cross-platform React Native app</a></li><li class="sidebarItem_iPNH"><a class="sidebarItemLink_2E17" href="/blog/2015/03/26/react-native-bringing-modern-web-techniques-to-mobile">React Native: Bringing modern web techniques to mobile</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_2I12">React Native Performance in Marketplace</h1><div class="margin-vert--md"><time datetime="2017-08-07T00:00:00.000Z" class="blogPostDate_2q4-">August 7, 2017  ¬∑ 5 min read</time></div><div class="avatar margin-vert--md"><div class="avatar__intro"><h4 class="avatar__name"><a href="https://www.facebook.com/aaronechiu" target="_blank" rel="noreferrer noopener">Aaron Chiu</a></h4><small class="avatar__subtitle">Software Engineer at Facebook</small></div></div></header><section class="markdown"><p>React Native is used in multiple places across multiple apps in the Facebook family including a top level tab in the main Facebook apps. Our focus for this post is a highly visible product, <a href="https://newsroom.fb.com/news/2016/10/introducing-marketplace-buy-and-sell-with-your-local-community/" target="_blank" rel="noopener noreferrer">Marketplace</a>. It is available in a dozen or so countries and enables users to discover products and services provided by other users.</p><p>In the first half of 2017, through the joint effort of the Relay Team, the Marketplace team, the Mobile JS Platform team, and the React Native team, we cut Marketplace Time to Interaction (TTI) in half for Android <a href="https://code.facebook.com/posts/307478339448736/year-class-a-classification-system-for-android/" target="_blank" rel="noopener noreferrer">Year Class 2010-11 devices</a>. Facebook has historically considered these devices as low-end Android devices, and they have the slowest TTIs on any platform or device type.</p><p>A typical React Native startup looks something like this:</p><p><img src="/assets/images/RNPerformanceStartup-1fd20cca7c74d0ee7a15fe9e8199610f.png"></p><blockquote><p>Disclaimer: ratios aren&#x27;t representative and will vary depending on how React Native is configured and used.</p></blockquote><p>We first initialize the React Native core (aka the ‚ÄúBridge‚Äù) before running the product specific JavaScript which determines what native views React Native will render in the Native Processing Time.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="a-different-approach"></a>A different approach<a class="hash-link" href="#a-different-approach" title="Direct link to heading">#</a></h3><p>One of the earlier mistakes that we made was to let <a href="https://code.facebook.com/posts/747457662026706/performance-instrumentation-for-android-apps/" target="_blank" rel="noopener noreferrer">Systrace and CTScan</a> drive our performance efforts. These tools helped us find a lot of low-hanging fruit in 2016, but we discovered that both Systrace and CTScan are <strong>not representative of production scenarios</strong> and cannot emulate what happens in the wild. Ratios of time spent in the breakdowns are often incorrect and, wildly off-base at times. At the extreme, some things that we expected to take a few milliseconds actually take hundreds or thousands of milliseconds. That said, CTScan is useful and we&#x27;ve found it catches a third of regressions before they hit production.</p><p>On Android, we attribute the shortcomings of these tools to the fact that 1) React Native is a multithreaded framework, 2) Marketplace is co-located with a multitude of complex views such as Newsfeed and other top-level tabs, and 3) computation times vary wildly. Thus, this half, we let production measurements and breakdowns drive almost all of our decision making and prioritization.</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="down-the-path-of-production-instrumentation"></a>Down the path of production instrumentation<a class="hash-link" href="#down-the-path-of-production-instrumentation" title="Direct link to heading">#</a></h3><p>Instrumenting production may sound simple on the surface, but it turned out to be quite a complex process. It took multiple iteration cycles of 2-3 weeks each; due to the latency of landing a commit in master, to pushing the app to the Play Store, to gathering sufficient production samples to have confidence in our work. Each iteration cycle involved discovering if our breakdowns were accurate, if they had the right level of granularity, and if they properly added up to the whole time span. We could not rely on alpha and beta releases because they are not representative of the general population. In essence, we very tediously built a very accurate production trace based on the aggregate of millions of samples.</p><p>One of the reasons we meticulously verified that every millisecond in breakdowns properly added up to their parent metrics was that we realized early on there were gaps in our instrumentation. It turned out that our initial breakdowns did not account for stalls caused by thread jumps. Thread jumps themselves aren&#x27;t expensive, but thread jumps to busy threads already doing work are very expensive. We eventually reproduced these blockages locally by sprinkling <code>Thread.sleep()</code> calls at the right moments, and we managed to fix them by:</p><ol><li>removing our dependency on AsyncTask,</li><li>undoing the forced initialization of ReactContext and NativeModules on the UI thread, and</li><li>removing the dependency on measuring the ReactRootView at initialization time.</li></ol><p>Together, removing these thread blockage issues reduced the startup time by over 25%.</p><p>Production metrics also challenged some of our prior assumptions. For example, we used to pre-load many JavaScript modules on the startup path under the assumption that co-locating modules in one bundle would reduce their initialization cost. However, the cost of pre-loading and co-locating these modules far outweighed the benefits. By re-configuring our inline require blacklists and removing JavaScript modules from the startup path, we were able to avoid loading unnecessary modules such as Relay Classic (when only <a href="https://relay.dev/docs/new-in-relay-modern" target="_blank" rel="noopener noreferrer">Relay Modern</a> was necessary). Today, our <code>RUN_JS_BUNDLE</code> breakdown is over 75% faster.</p><p>We also found wins by investigating product-specific native modules. For example, by lazily injecting a native module&#x27;s dependencies, we reduced that native module&#x27;s cost by 98%. By removing the contention of Marketplace startup with other products, we reduced startup by an equivalent interval.</p><p>The best part is that many of these improvements are broadly applicable to all screens built with React Native.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="conclusion"></a>Conclusion<a class="hash-link" href="#conclusion" title="Direct link to heading">#</a></h2><p>People assume that React Native startup performance problems are caused by JavaScript being slow or exceedingly high network times. While speeding up things like JavaScript would bring down TTI by a non-trivial sum, each of these contribute a much smaller percentage of TTI than was previously believed.</p><p>The lesson so far has been to <em>measure, measure, measure!</em> Some wins come from moving run-time costs to build time, such as Relay Modern and <a href="https://github.com/facebook/react-native/commit/797ca6c219b2a44f88f10c61d91e8cc21e2f306e" target="_blank" rel="noopener noreferrer">Lazy NativeModules</a>. Other wins come from avoiding work by being smarter about parallelizing code or removing dead code. And some wins come from large architectural changes to React Native, such as cleaning up thread blockages. There is no grand solution to performance, and longer-term performance wins will come from incremental instrumentation and improvements. Do not let cognitive bias influence your decisions. Instead, carefully gather and interpret production data to guide future work.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_E4oP" id="future-plans"></a>Future plans<a class="hash-link" href="#future-plans" title="Direct link to heading">#</a></h2><p>In the long term, we want Marketplace TTI to be comparable to similar products built with Native, and, in general, have React Native performance on par with native performance. Further more, although this half we drastically reduced the bridge startup cost by about 80%, we plan to bring the cost of the React Native bridge close to zero via projects like <a href="https://prepack.io/" target="_blank" rel="noopener noreferrer">Prepack</a> and more build time processing.</p></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a></div></footer></article><div></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2017/08/30/react-native-monthly-3"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">¬´ React Native Monthly #3</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2017/07/28/react-native-monthly-2"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">React Native Monthly #2 ¬ª</div></a></div></nav></div></main><div class="col col--2"><div class="tableOfContents_1zTD thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#a-different-approach" class="table-of-contents__link">A different approach</a></li><li><a href="#down-the-path-of-production-instrumentation" class="table-of-contents__link">Down the path of production instrumentation</a></li><li><a href="#conclusion" class="table-of-contents__link">Conclusion</a></li><li><a href="#future-plans" class="table-of-contents__link">Future plans</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/components-and-apis">Components and APIs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/more-resources">More Resources</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/help">The React Native Community</a></li><li class="footer__item"><a class="footer__link-item" href="/showcase">Who&#x27;s using React Native?</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/react-native" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ask Questions on Stack Overflow</a></li><li class="footer__item"><a href="https://github.com/facebook/react-native/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contributor Guide</a></li><li class="footer__item"><a href="https://dev.to/t/reactnative" target="_blank" rel="noopener noreferrer" class="footer__link-item">DEV Community</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Find us</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://twitter.com/reactnative" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">React</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_3cAK"><img class="footer__logo" alt="Facebook Open Source Logo" src="/img/oss_logo.png"></a></div><div class="footer__copyright">Copyright ¬© 2021 Facebook, Inc.</div></div></div></footer></div>
<script src="/styles.1b71bc8a.js"></script>
<script src="/runtime~main.7a0aa3e2.js"></script>
<script src="/main.253479d9.js"></script>
<script src="/1.4dffec5b.js"></script>
<script src="/2.8fcdf5b9.js"></script>
<script src="/3.0bb1235f.js"></script>
<script src="/01a85c17.1b4f80ef.js"></script>
<script src="/18b93cb3.702d1c1f.js"></script>
<script src="/1be78505.eb68720a.js"></script>
<script src="/1f391b9e.9e4e7e5d.js"></script>
<script src="/5fc994c2.786b5b61.js"></script>
<script src="/6875c492.2b7d2786.js"></script>
<script src="/a6aa9e1f.6a63439b.js"></script>
<script src="/c4f5d8e4.e34b2e24.js"></script>
<script src="/ccc49370.f3af674c.js"></script>
<script src="/942.97e2734e.js"></script>
<script src="/e4eeaf16.4baa9e2e.js"></script>
<script src="/96127592.938d7884.js"></script>
</body>
</html>