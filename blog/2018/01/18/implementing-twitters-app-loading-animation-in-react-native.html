<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.66">
<link rel="alternate" type="application/rss+xml" href="/blog/rss.xml" title="React Native Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/blog/atom.xml" title="React Native Blog Atom Feed">
<link rel="preconnect" href="https://www.google-analytics.com">
<script>window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-41298772-2","auto"),ga("send","pageview")</script>
<script async src="https://www.google-analytics.com/analytics.js"></script>
<link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-41298772-2"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","UA-41298772-2",{})</script>
<link rel="search" type="application/opensearchdescription+xml" title="React Native" href="/opensearch.xml">
<script src="https://cdn.jsdelivr.net/npm/focus-visible@5.2.0/dist/focus-visible.min.js" defer="defer"></script>
<script src="https://snack.expo.io/embed.js" defer="defer"></script><title data-react-helmet="true">Implementing Twitter‚Äôs App Loading Animation in React Native ¬∑ React Native</title><meta data-react-helmet="true" property="twitter:image" content="https://reactnative.dev/img/logo-og.png"><meta data-react-helmet="true" name="twitter:image:alt" content="Image for Implementing Twitter‚Äôs App Loading Animation in React Native ¬∑ React Native"><meta data-react-helmet="true" name="docsearch:language" content="en"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><meta data-react-helmet="true" name="description" content="A framework for building native apps using React"><meta data-react-helmet="true" property="og:title" content="React Native"><meta data-react-helmet="true" property="og:description" content="A framework for building native apps using React"><meta data-react-helmet="true" property="og:url" content="https://reactnative.dev/"><meta data-react-helmet="true" property="og:image" content="https://reactnative.dev/img/logo-og.png"><meta data-react-helmet="true" name="twitter:card" content="summary"><meta data-react-helmet="true" name="twitter:image" content="https://reactnative.dev/img/logo-og.png"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="preconnect" href="https://BH4D9OD16A-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/styles.fccefeba.css">
<link rel="stylesheet" href="/main.ca40cabd.css">
<link rel="preload" href="/styles.07d522c6.js" as="script">
<link rel="preload" href="/runtime~main.e737c6ee.js" as="script">
<link rel="preload" href="/main.5a3c9855.js" as="script">
<link rel="preload" href="/1.ba9ce8bd.js" as="script">
<link rel="preload" href="/2.58cb5d3d.js" as="script">
<link rel="preload" href="/3.b2e56904.js" as="script">
<link rel="preload" href="/01a85c17.fc3def5a.js" as="script">
<link rel="preload" href="/1be78505.a83719b3.js" as="script">
<link rel="preload" href="/52cb2878.43f3ca77.js" as="script">
<link rel="preload" href="/5fc994c2.e33f3447.js" as="script">
<link rel="preload" href="/6875c492.4aeeea1a.js" as="script">
<link rel="preload" href="/a6aa9e1f.0ce82f55.js" as="script">
<link rel="preload" href="/c4f5d8e4.08589e8d.js" as="script">
<link rel="preload" href="/ccc49370.82a72ad9.js" as="script">
<link rel="preload" href="/946.361bddca.js" as="script">
<link rel="preload" href="/e4eeaf16.e89b551b.js" as="script">
<link rel="preload" href="/36156fac.defdfa13.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav class="navbar navbar--fixed-top navbar--dark"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/header_logo.svg" alt="React Native"><strong class="navbar__title">React Native</strong></a><div class="navbar__item dropdown dropdown--hoverable dropdown--left"><a class="navbar__item navbar__link" href="/docs/getting-started">0.63</a><ul class="dropdown__menu"><li><a class="dropdown__link" href="/docs/next/getting-started">Next</a></li><li><a class="dropdown__link" href="/docs/getting-started">0.63</a></li><li><a class="dropdown__link" href="/docs/0.62/getting-started">0.62</a></li><li><a class="dropdown__link" href="/docs/0.61/getting-started">0.61</a></li><li><a class="dropdown__link" href="/docs/0.60/getting-started">0.60</a></li><li><a class="dropdown__link" href="/versions">All versions</a></li></ul></div></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/getting-started">Docs</a><a class="navbar__item navbar__link" href="/docs/components-and-apis">Components</a><a class="navbar__item navbar__link" href="/docs/accessibilityinfo">API</a><a class="navbar__item navbar__link" href="/help">Community</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a><a href="https://github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link navbar-github-link" aria-label="GitHub repository"></a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_3lWe"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_gnXW">üåú</span></div><div class="react-toggle-track-x"><span class="toggle_gnXW">üåû</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div><button type="button" class="DocSearch DocSearch-Button" aria-label="Search"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">Search</span><span class="DocSearch-Button-Key">‚åò</span><span class="DocSearch-Button-Key">K</span></button></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img class="navbar__logo" src="/img/header_logo.svg" alt="React Native"><strong class="navbar__title">React Native</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">Docs</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/components-and-apis">Components</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/accessibilityinfo">API</a></li><li class="menu__list-item"><a class="menu__link" href="/help">Community</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li><li class="menu__list-item menu__list-item--collapsed"><a role="button" class="menu__link menu__link--sublist">Versions</a><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/next/getting-started">Next</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/getting-started">0.63</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.62/getting-started">0.62</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.61/getting-started">0.61</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/0.60/getting-started">0.60</a></li><li class="menu__list-item"><a class="menu__link" href="/versions">All versions</a></li></ul></li><li class="menu__list-item"><a href="https://github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="menu__link navbar-github-link" aria-label="GitHub repository"></a></li></ul></div></div></div></nav><div class="main-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_2ewA"><h3 class="sidebarItemTitle_LeXb">All Blog Posts</h3><ul class="sidebarItemList_eLFE"><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2020/07/23/docs-update">React Native Documentation Update</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2020/07/17/react-native-principles">React Native Team Principles</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2020/07/06/version-0.63">Announcing React Native 0.63 with LogBox</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2020/03/26/version-0.62">Announcing React Native 0.62 with Flipper</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/11/18/react-native-doctor">Meet Doctor, a new React Native command</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/09/18/version-0.61">Announcing React Native 0.61 with Fast Refresh</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/07/17/hermes">Meet Hermes, a new JavaScript Engine optimized for React Native</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/07/03/version-60">Announcing React Native 0.60</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/06/12/react-native-open-source-update">React Native Open Source Update June 2019</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/05/01/react-native-at-f8-and-podcast">React Native at F8 and Open Source Podcast</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/03/12/releasing-react-native-059">Releasing React Native 0.59</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/03/01/react-native-open-source-update">React Native Open Source Update March 2019</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2019/01/07/state-of-react-native-community">The State of the React Native Community in 2018</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/11/01/oss-roadmap">Open Source Roadmap</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/08/27/wkwebview">Introducing new iOS WebViews</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/08/13/react-native-accessibility-updates">Accessibility API Updates</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/07/04/releasing-react-native-056">Releasing 0.56</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/06/14/state-of-react-native-2018">State of React Native 2018</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/05/07/using-typescript-with-react-native">Using TypeScript with React Native</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/04/09/build-com-app">Built with React Native - The Build.com app</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/03/22/building-input-accessory-view-for-react-native">Building &lt;InputAccessoryView&gt; For React Native</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/03/05/AWS-app-sync">Using AWS with React Native</a></li><li class="sidebarItem_3rCy"><a aria-current="page" class="sidebarItemLink_1ovH sidebarItemLinkActive_JvLa" href="/blog/2018/01/18/implementing-twitters-app-loading-animation-in-react-native">Implementing Twitter‚Äôs App Loading Animation in React Native</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2018/01/09/react-native-monthly-6">React Native Monthly #6</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/11/06/react-native-monthly-5">React Native Monthly #5</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/09/21/react-native-monthly-4">React Native Monthly #4</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/08/30/react-native-monthly-3">React Native Monthly #3</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/08/07/react-native-performance-in-marketplace">React Native Performance in Marketplace</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/07/28/react-native-monthly-2">React Native Monthly #2</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/06/21/react-native-monthly-1">React Native Monthly #1</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/03/13/better-list-views">Better List Views in React Native</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/03/13/idx-the-existential-function">idx: The Existential Function</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/03/13/introducing-create-react-native-app">Introducing Create React Native App</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/02/14/using-native-driver-for-animated">Using Native Driver for Animated</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2017/01/07/monthly-release-cadence">A Monthly Release Cadence: Releasing December and January RC</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/12/05/easier-upgrades">Easier Upgrades Thanks to Git</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/11/08/introducing-button-yarn-and-a-public-roadmap">Introducing Button, Faster Installs with Yarn, and a Public Roadmap</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/10/25/0.36-headless-js-the-keyboard-api-and-more">0.36: Headless JS, the Keyboard API, &amp; more</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/09/08/exponent-talks-unraveling-navigation">Expo Talks: Adam on Unraveling Navigation</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/08/19/right-to-left-support-for-react-native-apps">Right-to-Left Layout Support For React Native Apps</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/08/12/react-native-meetup-san-francisco">San Francisco Meetup Recap</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/07/06/toward-better-documentation">Toward Better Documentation</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/04/13/react-native-a-year-in-review">React Native: A year in review</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/03/28/dive-into-react-native-performance">Dive into React Native Performance</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2016/03/24/introducing-hot-reloading">Introducing Hot Reloading</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2015/11/23/making-react-native-apps-accessible">Making React Native apps accessible</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2015/09/14/react-native-for-android">React Native for Android: How we built the first cross-platform React Native app</a></li><li class="sidebarItem_3rCy"><a class="sidebarItemLink_1ovH" href="/blog/2015/03/26/react-native-bringing-modern-web-techniques-to-mobile">React Native: Bringing modern web techniques to mobile</a></li></ul></div></div><div class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_206m">Implementing Twitter‚Äôs App Loading Animation in React Native</h1><div class="margin-vert--md"><time datetime="2018-01-18T00:00:00.000Z" class="blogPostDate_BxXe">January 18, 2018  ¬∑ 11 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://github.com/TheSavior" target="_blank" rel="noreferrer noopener"><img src="https://avatars2.githubusercontent.com/u/249164?s=460&amp;v=4" alt="Eli White"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://github.com/TheSavior" target="_blank" rel="noreferrer noopener">Eli White</a></h4><small class="avatar__subtitle">Software Engineer at Facebook</small></div></div></header><section class="markdown"><p>Twitter‚Äôs iOS app has a loading animation I quite enjoy.</p><img src="/blog/assets/loading-screen-01.gif" style="float:left;padding-right:80px;padding-bottom:20px"><p>Once the app is ready, the Twitter logo delightfully expands, revealing the app.</p><p>I wanted to figure out how to recreate this loading animation with React Native.</p><hr style="clear:both;margin-bottom:40px;width:80px"><p>To understand <em>how</em> to build it, I first had to understand the difference pieces of the loading animation. The easiest way to see the subtlety is to slow it down.</p><img src="/blog/assets/loading-screen-02.gif" style="margin-top:20px;float:left;padding-right:80px;padding-bottom:20px"><p>There are a few major pieces in this that we will need to figure out how to build.</p><ol><li>Scaling the bird.</li><li>As the bird grows, showing the app underneath</li><li>Scaling the app down slightly at the end</li></ol><p>It took me quite a while to figure out how to make this animation.</p><p>I started with an <em>incorrect</em> assumption that the blue background and Twitter bird were a layer on <em>top</em> of the app and that as the bird grew, it became transparent which revealed the app underneath. This approach doesn‚Äôt work because the Twitter bird becoming transparent would show the blue layer, not the app underneath!</p><p>Luckily for you, dear reader, you don‚Äôt have to go through the same frustration I did. You get this nice tutorial skipping to the good stuff!</p><hr style="clear:both;margin-bottom:40px;width:80px"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="the-right-way"></a>The right way<a aria-hidden="true" tabindex="-1" class="hash-link" href="#the-right-way" title="Direct link to heading">#</a></h2><p>Before we get to code, it is important to understand how to break this down. To help visualize this effect, I recreated it in <a href="https://codepen.io/TheSavior/pen/NXNoJM" target="_blank" rel="noopener noreferrer">CodePen</a> (embedded in a few paragraphs) so you can interactively see the different layers.</p><img src="/blog/assets/loading-screen-03.png" style="float:left;padding-right:80px;padding-bottom:20px"><p>There are three main layers to this effect. The first is the blue background layer. Even though this seems to appear on top of the app, it is actually in the back.</p><p>We then have a plain white layer. And then lastly, in the very front, is our app.</p><hr style="clear:both;margin-bottom:40px;width:80px"><img src="/blog/assets/loading-screen-04.png" style="float:left;padding-right:80px;padding-bottom:20px"><p>The main trick to this animation is using the Twitter logo as a <code>mask</code> and masking both the app, and the white layer. I won‚Äôt go too deep on the details of masking, there are <a href="https://www.html5rocks.com/en/tutorials/masking/adobe/" target="_blank" rel="noopener noreferrer">plenty</a> of <a href="https://designshack.net/articles/graphics/a-complete-beginners-guide-to-masking-in-photoshop/" target="_blank" rel="noopener noreferrer">resources</a> <a href="https://www.sketchapp.com/docs/shapes/masking/" target="_blank" rel="noopener noreferrer">online</a> for that.</p><p>The basics of masking in this context are having images where opaque pixels of the mask show the content they are masking whereas transparent pixels of the mask hide the content they are masking.</p><p>We use the Twitter logo as a mask, and having it mask two layers; the solid white layer, and the app layer.</p><p>To reveal the app, we scale the mask up until it is larger than the entire screen.</p><p>While the mask is scaling up, we fade in the opacity of the app layer, showing the app and hiding the solid white layer behind it. To finish the effect, we start the app layer at a scale &gt; 1, and scale it down to 1 as the animation is ending. We then hide the non-app layers as they will never be seen again.</p><p>They say a picture is worth 1,000 words. How many words is an interactive visualization worth? Click through the animation with the ‚ÄúNext Step‚Äù button. Showing the layers gives you a side view perspective. The grid is there to help visualize the transparent layers.</p><iframe height="750" scrolling="no" title="Loading Screen Animation Steps" src="//codepen.io/TheSavior/embed/NXNoJM/?height=265&amp;theme-id=0&amp;default-tab=result&amp;embed-version=2" frameborder="no" allowfullscreen="" class="codepen">See the Pen <a href="https://codepen.io/TheSavior/pen/NXNoJM/" target="_blank" rel="noopener noreferrer">Loading Screen Animation Steps</a> by Eli White (<a href="https://codepen.io/TheSavior" target="_blank" rel="noopener noreferrer">@TheSavior</a>) on <a href="https://codepen.io" target="_blank" rel="noopener noreferrer">CodePen</a>.</iframe><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="now-for-the-react-native"></a>Now, for the React Native<a aria-hidden="true" tabindex="-1" class="hash-link" href="#now-for-the-react-native" title="Direct link to heading">#</a></h2><p>Alrighty. Now that we know what we are building and how the animation works, we can get down to the code ‚Äî the reason you are really here.</p><p>The main piece of this puzzle is <a href="/docs/maskedviewios">MaskedViewIOS</a>, a core React Native component.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"> MaskedViewIOS </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">from</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;react-native&#x27;</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">MaskedViewIOS</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">maskElement</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">Text</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&gt;</span><span class="token tag script language-javascript" style="color:#fc929e">Basic Mask</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">Text</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&gt;</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> backgroundColor</span><span class="token tag script language-javascript punctuation" style="color:#657b83">:</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript string" style="color:#8dc891">&#x27;blue&#x27;</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">MaskedViewIOS</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p><code>MaskedViewIOS</code> takes props <code>maskElement</code> and <code>children</code>. The children are masked by the <code>maskElement</code>. Note that the mask doesn‚Äôt need to be an image, it can be any arbitrary view. The behavior of the above example would be to render the blue view, but for it to be visible only where the words ‚ÄúBasic Mask‚Äù are from the <code>maskElement</code>. We just made complicated blue text.</p><p>What we want to do is render our blue layer, and then on top render our masked app and white layers with the Twitter logo.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  fullScreenBlueLayer</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">MaskedViewIOS</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">  </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> flex</span><span class="token tag script language-javascript punctuation" style="color:#657b83">:</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript number" style="color:#5a9bcf">1</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">  </span><span class="token tag attr-name" style="color:#c5a5c5">maskElement</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">    </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">View</span><span class="token tag script language-javascript tag" style="color:#fc929e"> </span><span class="token tag script language-javascript tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">centeredFullScreen</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">      </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">Image</span><span class="token tag script language-javascript tag" style="color:#fc929e"> </span><span class="token tag script language-javascript tag attr-name" style="color:#c5a5c5">source</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">twitterLogo</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript tag" style="color:#fc929e"> </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">/&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">    </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">View</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">  </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain">fullScreenWhiteLayer</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> flex</span><span class="token tag script language-javascript punctuation" style="color:#657b83">:</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript number" style="color:#5a9bcf">1</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">MyApp</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">MaskedViewIOS</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>This will give us the layers we see below.</p><img src="/blog/assets/loading-screen-04.png" style="margin-left:auto;margin-right:auto;display:block"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="now-for-the-animated-part"></a>Now for the Animated part<a aria-hidden="true" tabindex="-1" class="hash-link" href="#now-for-the-animated-part" title="Direct link to heading">#</a></h2><p>We have all the pieces we need to make this work, the next step is animating them. To make this animation feel good, we will be utilizing React Native‚Äôs <a href="/docs/animated">Animated</a> API.</p><p>Animated lets us define our animations declaratively in JavaScript. By default, these animations run in JavaScript and tell the native layer what changes to make on every frame. Even though JavaScript will try to update the animation every frame, it will likely not be able to do that fast enough and will cause dropped frames (jank) to occur. Not what we want!</p><p>Animated has special behavior to allow you to get animations without this jank. Animated has a flag called <code>useNativeDriver</code> which sends your animation definition from JavaScript to native at the beginning of your animation, allowing the native side to process the updates to your animation without having to go back and forth to JavaScript every frame. The downside of <code>useNativeDriver</code> is you can only update a specific set of properties, mostly <code>transform</code> and <code>opacity</code>. You can‚Äôt animate things like background color with <code>useNativeDriver</code>, at least not yet ‚Äî we will add more over time, and of course you can always submit a PR for properties you need for your project, benefitting the whole community üòÄ.</p><p>Since we want this animation to be smooth, we will work within these constraints. For a more in depth look at how <code>useNativeDriver</code> works under the hood, check out our <a href="/blog/2017/02/14/using-native-driver-for-animated">blog post announcing it</a>.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="breaking-down-our-animation"></a>Breaking down our animation<a aria-hidden="true" tabindex="-1" class="hash-link" href="#breaking-down-our-animation" title="Direct link to heading">#</a></h2><p>There are 4 components to our animation:</p><ol><li>Enlarge the bird, revealing the app and the solid white layer</li><li>Fade in the app</li><li>Scale down the app</li><li>Hide the white layer and blue layer when it is done</li></ol><p>With Animated, there are two main ways to define your animation. The first is by using <code>Animated.timing</code> which lets you say exactly how long your animation will run for, along with an easing curve to smooth out the motion. The other approach is by using the physics based apis such as <code>Animated.spring</code>. With <code>Animated.spring</code>, you specify parameters like the amount of friction and tension in the spring, and let physics run your animation.</p><p>We have multiple animations we want to be running at the same time which are all closely related to each other. For example, we want the app to start fading in while the mask is mid-reveal. Because these animations are closely related, we will use <code>Animated.timing</code> with a single <code>Animated.Value</code>.</p><p><code>Animated.Value</code> is a wrapper around a native value that Animated uses to know the state of an animation. You typically want to only have one of these for a complete animation. Most components that use Animated will store the value in state.</p><p>Since I‚Äôm thinking about this animation as steps occurring at different points in time along the complete animation, we will start our <code>Animated.Value</code> at 0, representing 0% complete, and end our value at 100, representing 100% complete.</p><p>Our initial component state will be the following.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">state </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  loadingProgress</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">new</span><span class="token plain"> </span><span class="token class-name" style="color:#fac863">Animated</span><span class="token class-name punctuation" style="color:#657b83">.</span><span class="token class-name" style="color:#fac863">Value</span><span class="token punctuation" style="color:#657b83">(</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>When we are ready to begin the animation, we tell Animated to animate this value to 100.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">Animated</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">timing</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">state</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">loadingProgress</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  toValue</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">100</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  duration</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1000</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  useNativeDriver</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"> </span><span class="token comment" style="color:#93a1a1">// This is important!</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">start</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>I then try to figure out a rough estimate of the different pieces of the animations and the values I want them to have at different stages of the overall animation. Below is a table of the different pieces of the animation, and what I think their values should be at different points as we progress through time.</p><p><img src="/assets/images/loading-screen-05-9b5c5f9b785287a11b6444ad4a8afcad.png"></p><p>The Twitter bird mask should start at scale 1, and it gets smaller before it shoots up in size. So at 10% through the animation, it should have a scale value of .8 before shooting up to scale 70 at the end. Picking 70 was pretty arbitrary to be honest, it needed to be large enough that the bird fully revealed the screen and 60 wasn‚Äôt big enough üòÄ. Something interesting about this part though is that the higher the number, the faster it will look like it is growing because it has to get there in the same amount of time. This number took some trial and error to make look good with this logo. Logos / devices of different sizes will require this end-scale to be different to ensure the entire screen is revealed.</p><p>The app should stay opaque for a while, at least through the Twitter logo getting smaller. Based on the official animation, I want to start showing it when the bird is mid way through scaling it up and to fully reveal it pretty quickly. So at 15% we start showing it, and at 30% through the overall animation it is fully visible.</p><p>The app scale starts at 1.1 and scales down to its regular scale by the end of the animation.</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="and-now-in-code"></a>And now, in code.<a aria-hidden="true" tabindex="-1" class="hash-link" href="#and-now-in-code" title="Direct link to heading">#</a></h2><p>What we essentially did above is map the values from the animation progress percentage to the values for the individual pieces. We do that with Animated using <code>.interpolate</code>. We create 3 different style objects, one for each piece of the animation, using interpolated values based off of <code>this.state.loadingProgress</code>.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> loadingProgress </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">state</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">loadingProgress</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> opacityClearToVisible </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  opacity</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> loadingProgress</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">interpolate</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    inputRange</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">15</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">30</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    outputRange</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    extrapolate</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token string" style="color:#8dc891">&#x27;clamp&#x27;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token comment" style="color:#93a1a1">// clamp means when the input is 30-100, output should stay at 1</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> imageScale </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  transform</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      scale</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> loadingProgress</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">interpolate</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        inputRange</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">10</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">100</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        outputRange</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">0.8</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">70</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> appScale </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  transform</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      scale</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> loadingProgress</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">interpolate</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        inputRange</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token number" style="color:#5a9bcf">0</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">100</span><span class="token punctuation" style="color:#657b83">]</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        outputRange</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">[</span><span class="token number" style="color:#5a9bcf">1.1</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1</span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">]</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>Now that we have these style objects, we can use them when rendering the snippet of the view from earlier in the post. Note that only <code>Animated.View</code>, <code>Animated.Text</code>, and <code>Animated.Image</code> are able to use style objects that use <code>Animated.Value</code>.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> fullScreenBlueLayer </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">fullScreenBlueLayer</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> fullScreenWhiteLayer </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">fullScreenWhiteLayer</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">fullScreen</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain">fullScreenBlueLayer</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">MaskedViewIOS</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">      </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> flex</span><span class="token tag script language-javascript punctuation" style="color:#657b83">:</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript number" style="color:#5a9bcf">1</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">      </span><span class="token tag attr-name" style="color:#c5a5c5">maskElement</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">        </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">View</span><span class="token tag script language-javascript tag" style="color:#fc929e"> </span><span class="token tag script language-javascript tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">centeredFullScreen</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">          </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">Animated.Image</span><span class="token tag script language-javascript tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript tag" style="color:#fc929e">            </span><span class="token tag script language-javascript tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">[</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">maskImageStyle</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">,</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e"> imageScale</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">]</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript tag" style="color:#fc929e">            </span><span class="token tag script language-javascript tag attr-name" style="color:#c5a5c5">source</span><span class="token tag script language-javascript tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript tag script language-javascript" style="color:#fc929e">twitterLogo</span><span class="token tag script language-javascript tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript tag" style="color:#fc929e">          </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">/&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">        </span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag script language-javascript tag class-name" style="color:#fac863">View</span><span class="token tag script language-javascript tag punctuation" style="color:#657b83">&gt;</span><span class="token tag script language-javascript" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag script language-javascript" style="color:#fc929e">      </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain">fullScreenWhiteLayer</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">Animated.View</span><span class="token tag" style="color:#fc929e"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token tag" style="color:#fc929e">        </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">[</span><span class="token tag script language-javascript" style="color:#fc929e">opacityClearToVisible</span><span class="token tag script language-javascript punctuation" style="color:#657b83">,</span><span class="token tag script language-javascript" style="color:#fc929e"> appScale</span><span class="token tag script language-javascript punctuation" style="color:#657b83">,</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript" style="color:#fc929e"> flex</span><span class="token tag script language-javascript punctuation" style="color:#657b83">:</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript number" style="color:#5a9bcf">1</span><span class="token tag script language-javascript" style="color:#fc929e"> </span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag script language-javascript punctuation" style="color:#657b83">]</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">        </span><span class="token punctuation" style="color:#657b83">{</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">props</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">children</span><span class="token punctuation" style="color:#657b83">}</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">      </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">Animated.View</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">MaskedViewIOS</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;/</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag punctuation" style="color:#657b83">&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><img src="/blog/assets/loading-screen-06.gif" style="float:left;padding-right:80px;padding-bottom:20px"><p>Yay! We now have the animation pieces looking like we want. Now we just have to clean up our blue and white layers which will never be seen again.</p><p>To know when we can clean them up, we need to know when the animation is complete. Luckily where we call, <code>Animated.timing</code> ,<code>.start</code> takes an optional callback that runs when the animation is complete.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">Animated</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">timing</span><span class="token punctuation" style="color:#657b83">(</span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">state</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">loadingProgress</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  toValue</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">100</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  duration</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token number" style="color:#5a9bcf">1000</span><span class="token punctuation" style="color:#657b83">,</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  useNativeDriver</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">start</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">)</span><span class="token plain"> </span><span class="token operator" style="color:#fc929e">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token function" style="color:#79b6f2">setState</span><span class="token punctuation" style="color:#657b83">(</span><span class="token punctuation" style="color:#657b83">{</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">    animationDone</span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token boolean" style="color:#ff8b50">true</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">}</span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>Now that we have a value in <code>state</code> to know whether we are done with the animation, we can modify our blue and white layers to use that.</p><div class="mdxCodeBlock_xYIz"><div class="codeBlockContent_rlEb"><button tabindex="0" type="button" aria-label="Copy code to clipboard" class="copyButton_kOW4">Copy</button><div class="prism-code language-jsx codeBlock_1AP7"><div class="codeBlockLines_1boI" style="color:#FFFFFF;background:#282C34"><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> fullScreenBlueLayer </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">state</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">animationDone </span><span class="token operator" style="color:#fc929e">?</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">null</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">[</span><span class="token tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">fullScreenBlueLayer</span><span class="token tag script language-javascript punctuation" style="color:#657b83">]</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token keyword" style="color:#c5a5c5">const</span><span class="token plain"> fullScreenWhiteLayer </span><span class="token operator" style="color:#fc929e">=</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">this</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">state</span><span class="token punctuation" style="color:#657b83">.</span><span class="token plain">animationDone </span><span class="token operator" style="color:#fc929e">?</span><span class="token plain"> </span><span class="token keyword" style="color:#c5a5c5">null</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#657b83">(</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain">  </span><span class="token tag punctuation" style="color:#657b83">&lt;</span><span class="token tag class-name" style="color:#fac863">View</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag attr-name" style="color:#c5a5c5">style</span><span class="token tag script language-javascript script-punctuation punctuation" style="color:#657b83">=</span><span class="token tag script language-javascript punctuation" style="color:#657b83">{</span><span class="token tag script language-javascript punctuation" style="color:#657b83">[</span><span class="token tag script language-javascript" style="color:#fc929e">styles</span><span class="token tag script language-javascript punctuation" style="color:#657b83">.</span><span class="token tag script language-javascript" style="color:#fc929e">fullScreenWhiteLayer</span><span class="token tag script language-javascript punctuation" style="color:#657b83">]</span><span class="token tag script language-javascript punctuation" style="color:#657b83">}</span><span class="token tag" style="color:#fc929e"> </span><span class="token tag punctuation" style="color:#657b83">/&gt;</span><span class="token plain"></span></div><div class="token-line" style="color:#FFFFFF;background:#282C34"><span class="token plain"></span><span class="token punctuation" style="color:#657b83">)</span><span class="token punctuation" style="color:#657b83">;</span></div></div></div></div></div><p>Voila! Our animation now works and we clean up our unused layers once the animation is done. We have built the Twitter app loading animation!</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="but-wait-mine-doesnt-work"></a>But wait, mine doesn‚Äôt work!<a aria-hidden="true" tabindex="-1" class="hash-link" href="#but-wait-mine-doesnt-work" title="Direct link to heading">#</a></h2><p>Don‚Äôt fret, dear reader. I too hate when guides only give you chunks of the code and don‚Äôt give you the completed source.</p><p>This component has been published to npm and is on GitHub as <a href="https://github.com/TheSavior/react-native-mask-loader" target="_blank" rel="noopener noreferrer">react-native-mask-loader</a>. To try this out on your phone, it is <a href="https://expo.io/@eliwhite/react-native-mask-loader-example" target="_blank" rel="noopener noreferrer">available on Expo</a> here:</p><img src="/blog/assets/loading-screen-07.png" style="margin-left:auto;margin-right:auto;display:block"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_3pqN" id="more-reading--extra-credit"></a>More Reading / Extra Credit<a aria-hidden="true" tabindex="-1" class="hash-link" href="#more-reading--extra-credit" title="Direct link to heading">#</a></h2><ol><li><a href="http://browniefed.com/react-native-animation-book/" target="_blank" rel="noopener noreferrer">This gitbook</a> is a great resource to learn more about Animated after you have read the React Native docs.</li><li>The actual Twitter animation seems to speed up the mask reveal towards the end. Try modifying the loader to use a different easing function (or a spring!) to better match that behavior.</li><li>The current end-scale of the mask is hard coded and likely won‚Äôt reveal the entire app on a tablet. Calculating the end scale based on screen size and image size would be an awesome PR.</li></ol></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/engineering">engineering</a></div></footer></article><div></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/2018/03/05/AWS-app-sync"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">¬´ Using AWS with React Native</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/blog/2018/01/09/react-native-monthly-6"><div class="pagination-nav__sublabel">Older Post</div><div class="pagination-nav__label">React Native Monthly #6 ¬ª</div></a></div></nav></div></div><div class="col col--2"><div class="tableOfContents_3iuQ"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#the-right-way" class="table-of-contents__link">The right way</a></li><li><a href="#now-for-the-react-native" class="table-of-contents__link">Now, for the React Native</a></li><li><a href="#now-for-the-animated-part" class="table-of-contents__link">Now for the Animated part</a></li><li><a href="#breaking-down-our-animation" class="table-of-contents__link">Breaking down our animation</a></li><li><a href="#and-now-in-code" class="table-of-contents__link">And now, in code.</a></li><li><a href="#but-wait-mine-doesnt-work" class="table-of-contents__link">But wait, mine doesn‚Äôt work!</a></li><li><a href="#more-reading--extra-credit" class="table-of-contents__link">More Reading / Extra Credit</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/getting-started">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/tutorial">Tutorial</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/components-and-apis">Components and APIs</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/more-resources">More Resources</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/help">The React Native Community</a></li><li class="footer__item"><a class="footer__link-item" href="/showcase">Who&#x27;s using React Native?</a></li><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/react-native" target="_blank" rel="noopener noreferrer" class="footer__link-item">Ask Questions on Stack Overflow</a></li><li class="footer__item"><a href="https://github.com/facebook/react-native/blob/master/CONTRIBUTING.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Contributor Guide</a></li><li class="footer__item"><a href="https://dev.to/t/reactnative" target="_blank" rel="noopener noreferrer" class="footer__link-item">DEV Community</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Find us</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://twitter.com/reactnative" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://github.com/facebook/react-native" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a href="https://reactjs.org/" target="_blank" rel="noopener noreferrer" class="footer__link-item">React</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/privacy" target="_blank" rel="noopener noreferrer" class="footer__link-item">Privacy Policy</a></li><li class="footer__item"><a href="https://opensource.facebook.com/legal/terms" target="_blank" rel="noopener noreferrer" class="footer__link-item">Terms of Service</a></li></ul></div></div><div class="text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com" target="_blank" rel="noopener noreferrer" class="footerLogoLink_19Ac"><img class="footer__logo" alt="Facebook Open Source Logo" src="/img/oss_logo.png"></a></div><div>Copyright ¬© 2020 Facebook, Inc.</div></div></div></footer></div>
<script src="/styles.07d522c6.js"></script>
<script src="/runtime~main.e737c6ee.js"></script>
<script src="/main.5a3c9855.js"></script>
<script src="/1.ba9ce8bd.js"></script>
<script src="/2.58cb5d3d.js"></script>
<script src="/3.b2e56904.js"></script>
<script src="/01a85c17.fc3def5a.js"></script>
<script src="/1be78505.a83719b3.js"></script>
<script src="/52cb2878.43f3ca77.js"></script>
<script src="/5fc994c2.e33f3447.js"></script>
<script src="/6875c492.4aeeea1a.js"></script>
<script src="/a6aa9e1f.0ce82f55.js"></script>
<script src="/c4f5d8e4.08589e8d.js"></script>
<script src="/ccc49370.82a72ad9.js"></script>
<script src="/946.361bddca.js"></script>
<script src="/e4eeaf16.e89b551b.js"></script>
<script src="/36156fac.defdfa13.js"></script>
</body>
</html>